"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[895],{16831:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=n(a(9435)),c=n(a(6520));o=[a(98351),a(50553),a(35244),a(51268),a(68938)],void 0===(r=function(e,t,a,o){return o.Nodes["coll-cast"]||(a.Browser.Nodes["coll-cast"]=a.Browser.Collection.extend({node:"cast",label:e("Casts"),type:"coll-cast",columns:["name","description"]})),o.Nodes.cast||(a.Browser.Nodes.cast=a.Browser.Node.extend({parent_type:"database",type:"cast",sqlAlterHelp:"sql-altercast.html",sqlCreateHelp:"sql-createcast.html",dialogHelp:t("help.static",{filename:"cast_dialog.html"}),canDrop:!0,canDropCascade:!0,label:e("Cast"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_cast_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Cast..."),data:{action:"create"},enable:o.Nodes.database.is_conn_allow},{name:"create_cast_on_coll",node:"coll-cast",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Cast..."),data:{action:"create"}},{name:"create_cast",node:"cast",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Cast..."),data:{action:"create"}}]))},getSchema:function(t,a){return new l.default({getTypeOptions:()=>(0,i.getNodeAjaxOptions)("get_type",this,t,a),getFuncOptions:(r,n)=>new Promise(((i,l)=>{const s=(0,c.default)();let d=o.Nodes.cast.generate_url(null,"get_functions",a,!1,t),p={srctyp:r,trgtyp:n};null!=r&&""!=r&&null!=n&&""!=n?s.post(d,p).then((e=>{p=e.data.data,i(p)})).catch((t=>{l(t instanceof Error?t:Error(e("Something went wrong")))})):(p=[],i(p))}))})}})),o.Nodes["coll-cast"]}.apply(t,o))||(e.exports=r)},46951:(e,t,a)=>{var o,r,n=a(2543),i=a(24994),l=i(a(72218)),c=a(42371),s=i(a(6520));o=[a(98351),a(50553),a(35244),a(51268),a(68938)],void 0===(r=function(e,t,a,o){return o.Nodes["coll-dbms_job"]||(o.Nodes["coll-dbms_job"]=o.Collection.extend({node:"dbms_job",label:e("DBMS Jobs"),type:"coll-dbms_job",columns:["jsjobname","jsjobenabled","jsjobruncount","jsjobfailurecount","jsjobdesc"],hasSQL:!1,hasDepends:!1,hasStatistics:!1,hasScriptTypes:[],canDrop:!0,canDropCascade:!1})),o.Nodes.dbms_job||(a.Browser.Nodes.dbms_job=a.Browser.Node.extend({parent_type:"dbms_job_scheduler",type:"dbms_job",label:e("DBMS Job"),node_image:"icon-pga_job",epasHelp:!0,epasURL:"https://www.enterprisedb.com/docs/epas/$VERSION$/epas_compat_bip_guide/03_built-in_packages/15_dbms_scheduler/02_create_job/",dialogHelp:t("help.static",{filename:"dbms_job.html"}),canDrop:!0,hasSQL:!0,hasDepends:!1,hasStatistics:!1,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_dbms_job_on_coll",node:"coll-dbms_job",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("DBMS Job..."),data:{action:"create"}},{name:"create_dbms_job",node:"dbms_job",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("DBMS Job..."),data:{action:"create"}},{name:"create_dbms_job",node:"dbms_job_scheduler",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("DBMS Job..."),data:{action:"create"}},{name:"enable_job",node:"dbms_job",module:this,applies:["object","context"],callback:"enable_job",priority:4,label:e("Enable Job"),enable:"is_enabled",data:{data_disabled:e("Job is already enabled.")}},{name:"disable_job",node:"dbms_job",module:this,applies:["object","context"],callback:"disable_job",priority:4,label:e("Disable Job"),enable:"is_disabled",data:{data_disabled:e("Job is already disabled.")}},{name:"run_job",node:"dbms_job",module:this,applies:["object","context"],callback:"run_job",priority:4,label:e("Run Job"),enable:"is_disabled",data:{data_disabled:e("Job is already disabled.")}}]))},is_enabled:function(e){return!e?.is_enabled},is_disabled:function(e){return e?.is_enabled},callbacks:{enable_job:function(t,r){let i=t||{},l=this,c=o.tree,d="item"in i?i.item:c.selected(),p=d?c.itemData(d):void 0;if(p){r=r||n.isUndefined(r)||n.isNull(r);let t=function(){let e=p;(0,s.default)().put(l.generate_url(d,"enable_disable",p,!0),{job_name:e.label,is_enable_job:!0}).then((t=>{let{data:o}=t;1==o.success&&(a.Browser.notifier.success(o.info),c.removeIcon(d),e.icon="icon-pga_jobstep",e.is_enabled=!0,c.addIcon(d,{icon:e.icon}),c.updateAndReselectNode(d,e))})).catch((function(e){a.Browser.notifier.pgRespErrorNotify(e),c.refresh(d)}))};r?a.Browser.notifier.confirm(e("Enable Job"),e("Are you sure you want to enable the job %s?",p.label),(function(){t()}),(function(){return!0})):t()}return!1},disable_job:function(t,r){let i=t||{},l=this,c=o.tree,d="item"in i?i.item:c.selected(),p=d?c.itemData(d):void 0;if(p){r=r||n.isUndefined(r)||n.isNull(r);let t=function(){let e=p;(0,s.default)().put(l.generate_url(d,"enable_disable",p,!0),{job_name:e.label,is_enable_job:!1}).then((t=>{let{data:o}=t;1==o.success&&(a.Browser.notifier.success(o.info),c.removeIcon(d),e.icon="icon-pga_jobstep-disabled",e.is_enabled=!1,c.addIcon(d,{icon:e.icon}),c.updateAndReselectNode(d,e))})).catch((function(e){a.Browser.notifier.pgRespErrorNotify(e),c.refresh(d)}))};r?a.Browser.notifier.confirm(e("Disable Job"),e("Are you sure you want to disable the job %s?",p.label),(function(){t()}),(function(){return!0})):t()}return!1},run_job:function(t,r){let i=t||{},l=this,c=o.tree,d="item"in i?i.item:c.selected(),p=d?c.itemData(d):void 0;if(p){r=r||n.isUndefined(r)||n.isNull(r);let t=function(){let e=p;(0,s.default)().put(l.generate_url(d,"run_job",p,!0),{job_name:e.label}).then((e=>{let{data:t}=e;1==t.success&&a.Browser.notifier.success(t.info)})).catch((function(e){a.Browser.notifier.pgRespErrorNotify(e)}))};r?a.Browser.notifier.confirm(e("Run Job"),e("Are you sure you want to run the job %s now?",p.label),(function(){t()}),(function(){return!0})):t()}return!1}},getSchema:function(e,t){return new l.default({procedures:()=>(0,c.getNodeAjaxOptions)("get_procedures",this,e,t),programs:()=>(0,c.getNodeAjaxOptions)("get_programs",this,e,t),schedules:()=>(0,c.getNodeAjaxOptions)("get_schedules",this,e,t)})}})),o.Nodes.dbms_job}.apply(t,o))||(e.exports=r)},68860:(e,t,a)=>{var o,r,n=a(2543),i=a(24994),l=i(a(32530)),c=a(42371),s=i(a(6520));o=[a(98351),a(50553),a(35244),a(51268),a(68938)],void 0===(r=function(e,t,a,o){return o.Nodes["coll-dbms_program"]||(o.Nodes["coll-dbms_program"]=o.Collection.extend({node:"dbms_program",label:e("DBMS Programs"),type:"coll-dbms_program",columns:["jsprname","jsprtype","jsprenabled","jsprdesc"],hasSQL:!1,hasDepends:!1,hasStatistics:!1,hasScriptTypes:[],canDrop:!0,canDropCascade:!1})),o.Nodes.dbms_program||(a.Browser.Nodes.dbms_program=a.Browser.Node.extend({parent_type:"dbms_job_scheduler",type:"dbms_program",label:e("DBMS Program"),node_image:"icon-pga_jobstep",epasHelp:!0,epasURL:"https://www.enterprisedb.com/docs/epas/$VERSION$/epas_compat_bip_guide/03_built-in_packages/15_dbms_scheduler/03_create_program/",dialogHelp:t("help.static",{filename:"dbms_program.html"}),canDrop:!0,hasSQL:!0,hasDepends:!1,hasStatistics:!1,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_dbms_program_on_coll",node:"coll-dbms_program",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("DBMS Program..."),data:{action:"create"}},{name:"create_dbms_program",node:"dbms_program",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("DBMS Program..."),data:{action:"create"}},{name:"create_dbms_program",node:"dbms_job_scheduler",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("DBMS Program..."),data:{action:"create"}},{name:"enable_program",node:"dbms_program",module:this,applies:["object","context"],callback:"enable_program",priority:4,label:e("Enable Program"),enable:"is_enabled",data:{data_disabled:e("Program is already enabled.")}},{name:"disable_program",node:"dbms_program",module:this,applies:["object","context"],callback:"disable_program",priority:4,label:e("Disable Program"),enable:"is_disabled",data:{data_disabled:e("Program is already disabled.")}}]))},is_enabled:function(e){return!e?.is_enabled},is_disabled:function(e){return e?.is_enabled},callbacks:{enable_program:function(t,r){let i=t||{},l=this,c=o.tree,d="item"in i?i.item:c.selected(),p=d?c.itemData(d):void 0;if(p){r=r||n.isUndefined(r)||n.isNull(r);let t=function(){let e=p;(0,s.default)().put(l.generate_url(d,"enable_disable",p,!0),{program_name:e.label,is_enable_program:!0}).then((t=>{let{data:o}=t;1==o.success&&(a.Browser.notifier.success(o.info),c.removeIcon(d),e.icon="icon-pga_jobstep",e.is_enabled=!0,c.addIcon(d,{icon:e.icon}),c.updateAndReselectNode(d,e))})).catch((function(e){a.Browser.notifier.pgRespErrorNotify(e),c.refresh(d)}))};r?a.Browser.notifier.confirm(e("Enable Program"),e("Are you sure you want to enable the program %s?",p.label),(function(){t()}),(function(){return!0})):t()}return!1},disable_program:function(t,r){let i=t||{},l=this,c=o.tree,d="item"in i?i.item:c.selected(),p=d?c.itemData(d):void 0;if(p){r=r||n.isUndefined(r)||n.isNull(r);let t=function(){let e=p;(0,s.default)().put(l.generate_url(d,"enable_disable",p,!0),{program_name:e.label,is_enable_program:!1}).then((t=>{let{data:o}=t;1==o.success&&(a.Browser.notifier.success(o.info),c.removeIcon(d),e.icon="icon-pga_jobstep-disabled",e.is_enabled=!1,c.addIcon(d,{icon:e.icon}),c.updateAndReselectNode(d,e))})).catch((function(e){a.Browser.notifier.pgRespErrorNotify(e),c.refresh(d)}))};r?a.Browser.notifier.confirm(e("Disable Program"),e("Are you sure you want to disable the program %s?",p.label),(function(){t()}),(function(){return!0})):t()}return!1}},getSchema:function(e,t){return new l.default({procedures:()=>(0,c.getNodeAjaxOptions)("get_procedures",this,e,t)})}})),o.Nodes.dbms_program}.apply(t,o))||(e.exports=r)},86394:(e,t,a)=>{var o,r,n=a(24994)(a(5312));o=[a(98351),a(50553),a(35244),a(51268),a(68938)],void 0===(r=function(e,t,a,o){return o.Nodes["coll-dbms_schedule"]||(o.Nodes["coll-dbms_schedule"]=o.Collection.extend({node:"dbms_schedule",label:e("DBMS Schedules"),type:"coll-dbms_schedule",columns:["jsscname","jsscrepeatint","jsscdesc"],hasSQL:!1,hasDepends:!1,hasStatistics:!1,hasScriptTypes:[],canDrop:!0,canDropCascade:!1})),o.Nodes.dbms_schedule||(a.Browser.Nodes.dbms_schedule=a.Browser.Node.extend({parent_type:"dbms_job_scheduler",type:"dbms_schedule",label:e("DBMS Schedule"),node_image:"icon-pga_schedule",epasHelp:!0,epasURL:"https://www.enterprisedb.com/docs/epas/$VERSION$/epas_compat_bip_guide/03_built-in_packages/15_dbms_scheduler/04_create_schedule/",dialogHelp:t("help.static",{filename:"dbms_schedule.html"}),canDrop:!0,hasSQL:!0,hasDepends:!1,hasStatistics:!1,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_dbms_schedule_on_coll",node:"coll-dbms_schedule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("DBMS Schedule..."),data:{action:"create"}},{name:"create_dbms_schedule",node:"dbms_schedule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("DBMS Schedule..."),data:{action:"create"}},{name:"create_dbms_schedule",node:"dbms_job_scheduler",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("DBMS Schedule..."),data:{action:"create"}}]))},getSchema:()=>new n.default})),o.Nodes.dbms_schedule}.apply(t,o))||(e.exports=r)},83206:(e,t,a)=>{var o,r,n=a(24994)(a(18311));o=[a(98351),a(35244),a(51268),a(68938),a(46951),a(68860),a(86394)],void 0===(r=function(e,t,a){return a.Nodes.dbms_job_scheduler||(t.Browser.Nodes.dbms_job_scheduler=t.Browser.Node.extend({parent_type:"database",type:"dbms_job_scheduler",label:e("DBMS Job Scheduler"),columns:["jobname","jobstatus","joberror","jobstarttime","jobendtime","jobnextrun"],canDrop:!1,canDropCascade:!1,canSelect:!1,hasSQL:!1,hasDepends:!1,hasStatistics:!1,hasScriptTypes:[],Init:function(){this.initialized||(this.initialized=!0)},getSchema:()=>new n.default})),a.Nodes.dbms_job_scheduler}.apply(t,o))||(e.exports=r)},80072:(e,t,a)=>{var o,r,n=a(24994)(a(11551)),i=a(42371);o=[a(98351),a(50553),a(35244),a(51268),a(68938)],void 0===(r=function(e,t,a,o){return o.Nodes["coll-event_trigger"]||(a.Browser.Nodes["coll-event_trigger"]=a.Browser.Collection.extend({node:"event_trigger",label:e("Event Trigger"),type:"coll-event_trigger",columns:["name","eventowner","comment"],canDrop:!0,canDropCascade:!1})),o.Nodes.event_trigger||(a.Browser.Nodes.event_trigger=a.Browser.Node.extend({parent_type:"database",type:"event_trigger",sqlAlterHelp:"sql-altereventtrigger.html",sqlCreateHelp:"sql-createeventtrigger.html",dialogHelp:t("help.static",{filename:"event_trigger_dialog.html"}),label:e("Event Trigger"),hasSQL:!0,hasDepends:!0,canDrop:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_event_trigger_on_coll",node:"coll-event_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Event Trigger..."),data:{action:"create"}},{name:"create_event_trigger",node:"event_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Event Trigger..."),data:{action:"create"}},{name:"create_event_trigger",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Event Trigger..."),data:{action:"create"},enable:o.Nodes.database.is_conn_allow}]))},getSchema:function(e,t){return new n.default({role:()=>(0,i.getNodeListByName)("role",e,t),function_names:()=>(0,i.getNodeAjaxOptions)("fopts",this,e,t,{cacheLevel:"trigger_function"})},{eventowner:o.serverInfo[e.server._id].user.name})}})),o.Nodes["coll-event_trigger"]}.apply(t,o))||(e.exports=r)},2988:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=n(a(48571)),c=n(a(2543));o=[a(98351),a(50553),a(35244),a(51268),a(68938)],void 0===(r=function(e,t,a,o){return o.Nodes["coll-extension"]||(a.Browser.Nodes["coll-extension"]=a.Browser.Collection.extend({node:"extension",label:e("Extensions"),type:"coll-extension",columns:["name","owner","comment"]})),o.Nodes.extension||(a.Browser.Nodes.extension=a.Browser.Node.extend({parent_type:"database",type:"extension",sqlAlterHelp:"sql-alterextension.html",sqlCreateHelp:"sql-createextension.html",dialogHelp:t("help.static",{filename:"extension_dialog.html"}),hasSQL:!0,hasDepends:!0,canDrop:!0,canDropCascade:!0,label:e("Extension"),Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_extension_on_coll",node:"coll-extension",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Extension..."),data:{action:"create"}},{name:"create_extension",node:"extension",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Extension..."),data:{action:"create"}},{name:"create_extension",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Extension..."),data:{action:"create"},enable:o.Nodes.database.is_conn_allow}]))},getSchema:(e,t)=>{let o=a.Browser.Nodes.extension;return new l.default({role:()=>(0,i.getNodeListByName)("role",e,t),extensionsList:()=>(0,i.getNodeAjaxOptions)("avails",o,e,t,{cacheLevel:"server"},(e=>{let t=[];return e&&c.default.isArray(e)&&c.default.each(e,(function(e){t.push({label:e.name,value:e.name,data:e})})),t})),schemaList:()=>(0,i.getNodeListByName)("schema",e,t)})}})),o.Nodes["coll-extension"]}.apply(t,o))||(e.exports=r)},30132:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=a(21164),c=n(a(93466));o=[a(98351),a(50553),a(35244),a(51268),a(68938)],void 0===(r=function(e,t,a,o){return o.Nodes["coll-foreign_server"]||(a.Browser.Nodes["coll-foreign_server"]=a.Browser.Collection.extend({node:"foreign_server",label:e("Foreign Servers"),type:"coll-foreign_server",columns:["name","fsrvowner","description"]})),o.Nodes.foreign_server||(a.Browser.Nodes.foreign_server=a.Browser.Node.extend({parent_type:"foreign_data_wrapper",type:"foreign_server",sqlAlterHelp:"sql-alterserver.html",sqlCreateHelp:"sql-createserver.html",dialogHelp:t("help.static",{filename:"foreign_server_dialog.html"}),label:e("Foreign Server"),hasSQL:!0,hasDepends:!0,canDrop:!0,canDropCascade:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_foreign_server_on_coll",node:"coll-foreign_server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Server..."),data:{action:"create"}},{name:"create_foreign_server",node:"foreign_server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Server..."),data:{action:"create"}},{name:"create_foreign_server",node:"foreign_data_wrapper",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Server..."),data:{action:"create"}}]))},getSchema:function(e,t){return new c.default((a=>(0,l.getNodePrivilegeRoleSchema)(this,e,t,a)),{role:()=>(0,i.getNodeListByName)("role",e,t)},{fsrvowner:o.serverInfo[e.server._id].user.name})}})),o.Nodes["coll-foreign_server"]}.apply(t,o))||(e.exports=r)},30476:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=n(a(55810));o=[a(98351),a(50553),a(35244),a(51268),a(68938)],void 0===(r=function(e,t,a,o){return o.Nodes["coll-user_mapping"]||(a.Browser.Nodes["coll-user_mapping"]=a.Browser.Collection.extend({node:"user_mapping",label:e("User Mappings"),type:"coll-user_mapping",columns:["name"]})),o.Nodes.user_mapping||(a.Browser.Nodes.user_mapping=a.Browser.Node.extend({parent_type:"foreign_server",type:"user_mapping",sqlAlterHelp:"sql-alterusermapping.html",sqlCreateHelp:"sql-createusermapping.html",dialogHelp:t("help.static",{filename:"user_mapping_dialog.html"}),label:e("User Mapping"),hasSQL:!0,hasDepends:!0,canDrop:!0,canDropCascade:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_user_mapping_on_coll",node:"coll-user_mapping",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("User Mapping..."),data:{action:"create"}},{name:"create_user_mapping",node:"user_mapping",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("User Mapping..."),data:{action:"create"}},{name:"create_user_mapping",node:"foreign_server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("User Mapping..."),data:{action:"create"}}]))},getSchema:function(e,t){return new l.default({role:()=>(0,i.getNodeListByName)("role",e,t,{},(()=>!0),(e=>(e.unshift({label:"CURRENT_USER",value:"CURRENT_USER",image:"icon-role"},{label:"PUBLIC",value:"PUBLIC",image:"icon-role"}),e)))},{name:o.serverInfo[e.server._id].user.name})}})),o.Nodes["coll-user_mapping"]}.apply(t,o))||(e.exports=r)},31435:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=a(21164),c=n(a(40271));o=[a(98351),a(50553),a(51268),a(68938)],void 0===(r=function(e,t,a){return a.Nodes["coll-foreign_data_wrapper"]||(a.Nodes["coll-foreign_data_wrapper"]=a.Collection.extend({node:"foreign_data_wrapper",label:e("Foreign Data Wrappers"),type:"coll-foreign_data_wrapper",columns:["name","fdwowner","description"]})),a.Nodes.foreign_data_wrapper||(a.Nodes.foreign_data_wrapper=a.Node.extend({parent_type:"database",type:"foreign_data_wrapper",sqlAlterHelp:"sql-alterforeigndatawrapper.html",sqlCreateHelp:"sql-createforeigndatawrapper.html",dialogHelp:t("help.static",{filename:"foreign_data_wrapper_dialog.html"}),label:e("Foreign Data Wrapper"),hasSQL:!0,hasDepends:!0,canDrop:!0,canDropCascade:!0,Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_foreign_data_wrapper_on_coll",node:"coll-foreign_data_wrapper",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Data Wrapper..."),data:{action:"create"}},{name:"create_foreign_data_wrapper",node:"foreign_data_wrapper",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Data Wrapper..."),data:{action:"create"}},{name:"create_foreign_data_wrapper",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Data Wrapper..."),data:{action:"create"},enable:a.Nodes.database.is_conn_allow}]))},getSchema:function(e,t){return new c.default((a=>(0,l.getNodePrivilegeRoleSchema)(this,e,t,a)),{role:()=>(0,i.getNodeListByName)("role",e,t),fdwhan:()=>(0,i.getNodeAjaxOptions)("get_handlers",this,e,t),fdwvalue:()=>(0,i.getNodeAjaxOptions)("get_validators",this,e,t)},{fdwowner:a.serverInfo[e.server._id].user.name})}})),a.Nodes.foreign_data_wrapper}.apply(t,o))||(e.exports=r)},79604:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=n(a(2963)),c=a(21164);o=[a(98351),a(50553),a(51268),a(68938)],void 0===(r=function(e,t,a){return a.Nodes["coll-language"]||(a.Nodes["coll-language"]=a.Collection.extend({node:"language",label:e("Languages"),type:"coll-language",columns:["name","lanowner","description"]})),a.Nodes.language||(a.Nodes.language=a.Node.extend({parent_type:"database",type:"language",sqlAlterHelp:"sql-alterlanguage.html",sqlCreateHelp:"sql-createlanguage.html",dialogHelp:t("help.static",{filename:"language_dialog.html"}),label:e("Language"),hasSQL:!0,canDrop:!0,canDropCascade:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_language_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Language..."),data:{action:"create"},enable:a.Nodes.database.is_conn_allow},{name:"create_language_on_coll",node:"coll-language",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Language..."),data:{action:"create"}},{name:"create_language",node:"language",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Language..."),data:{action:"create"}}]))},getSchema:function(e,t){return new l.default((a=>(0,c.getNodePrivilegeRoleSchema)(this,e,t,a)),{lan_functions:()=>(0,i.getNodeAjaxOptions)("get_functions",this,e,t),templates_data:()=>(0,i.getNodeAjaxOptions)("get_templates",this,e,t),role:()=>(0,i.getNodeListByName)("role",e,t)},{node_info:e.server})}})),a.Nodes["coll-language"]}.apply(t,o))||(e.exports=r)},27537:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=n(a(5909));o=[a(98351),a(50553),a(51268),a(68938)],void 0===(r=function(e,t,a){return a.Nodes["coll-publication"]||(a.Nodes["coll-publication"]=a.Collection.extend({node:"publication",label:e("Publications"),type:"coll-publication",columns:["name","pubowner","pubtable","all_table"]})),a.Nodes.publication||(a.Nodes.publication=a.Node.extend({parent_type:"database",type:"publication",sqlAlterHelp:"sql-alterpublication.html",sqlCreateHelp:"sql-createpublication.html",dialogHelp:t("help.static",{filename:"publication_dialog.html"}),label:e("Publication"),hasSQL:!0,canDrop:!0,canDropCascade:!0,hasDepends:!0,width:a.stdW.md+"px",Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_publication_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Publication..."),data:{action:"create"},enable:a.Nodes.database.canCreate},{name:"create_publication_on_coll",node:"coll-publication",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Publication..."),data:{action:"create"}},{name:"create_publication",node:"publication",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Publication..."),data:{action:"create"}}]))},getSchema:function(e,t){return new l.default({allTables:()=>(0,i.getNodeAjaxOptions)("get_tables",this,e,t),allSchemas:()=>(0,i.getNodeAjaxOptions)("get_schemas",this,e,t),getColumns:a=>(0,i.getNodeAjaxOptions)("get_all_columns",this,e,t,{urlParams:a,useCache:!1}),role:()=>(0,i.getNodeListByName)("role",e,t)},{node_info:e.server})}})),a.Nodes["coll-publication"]}.apply(t,o))||(e.exports=r)},458:(e,t,a)=>{var o,r,n=a(24994)(a(92240));o=[a(98351),a(35244),a(51268),a(4372),a(68938)],void 0===(r=function(e,t,a,o){return a.Nodes["coll-aggregate"]||(t.Browser.Nodes["coll-aggregate"]=t.Browser.Collection.extend({node:"aggregate",label:e("Aggregates"),type:"coll-aggregate",columns:["name","owner","description"],canDrop:!1,canDropCascade:!1})),a.Nodes.aggregate||(t.Browser.Nodes.aggregate=o.SchemaChildNode.extend({type:"aggregate",sqlAlterHelp:"sql-alteraggregate.html",sqlCreateHelp:"sql-createaggregate.html",label:e("Aggregate"),collection_type:"coll-aggregate",hasSQL:!0,hasDepends:!1,canDrop:!1,canDropCascade:!1,Init:function(){this.initialized||(this.initialized=!0)},getSchema:()=>new n.default})),a.Nodes.aggregate}.apply(t,o))||(e.exports=r)},84255:(e,t,a)=>{var o,r,n=a(24994)(a(67451));o=[a(98351),a(35244),a(51268),a(68938)],void 0===(r=function(e,t,a){return a.Nodes["coll-catalog_object_column"]||(t.Browser.Nodes["coll-catalog_object_column"]=t.Browser.Collection.extend({node:"catalog_object_column",label:e("catalog_object_column"),type:"coll-catalog_object_column",columns:["attname","attnum","cltype","description"],canDrop:!1,canDropCascade:!1})),a.Nodes.catalog_object_column||(t.Browser.Nodes.catalog_object_column=t.Browser.Node.extend({parent_type:"catalog_object",type:"catalog_object_column",label:e("catalog_object_column"),hasSQL:!1,hasScriptTypes:[],hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0)},getSchema:function(){return new n.default}})),a.Nodes.catalog_object_column}.apply(t,o))||(e.exports=r)},58:(e,t,a)=>{var o,r,n=a(24994)(a(43328));o=[a(98351),a(35244),a(51268),a(68938)],void 0===(r=function(e,t,a){return a.Nodes["coll-catalog_object"]||(t.Browser.Nodes["coll-catalog_object"]=t.Browser.Collection.extend({node:"catalog_object",label:e("Catalog Objects"),type:"coll-catalog_object",columns:["name","owner","description"],canDrop:!1,canDropCascade:!1})),a.Nodes.catalog_object||(t.Browser.Nodes.catalog_object=t.Browser.Node.extend({parent_type:"catalog",type:"catalog_object",label:e("Catalog Object"),hasSQL:!1,hasScriptTypes:[],hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0)},getSchema:()=>new n.default})),a.Nodes.catalog_object}.apply(t,o))||(e.exports=r)},1146:(e,t,a)=>{var o,r,n=a(24994)(a(42720)),i=a(42371);o=[a(98351),a(50553),a(35244),a(51268),a(4372),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r,l){return o.Nodes["coll-collation"]||(a.Browser.Nodes["coll-collation"]=a.Browser.Collection.extend({node:"collation",label:e("Collations"),type:"coll-collation",columns:["name","owner","description"],canDrop:l.isTreeItemOfChildOfSchema,canDropCascade:l.isTreeItemOfChildOfSchema})),o.Nodes.collation||(a.Browser.Nodes.collation=r.SchemaChildNode.extend({type:"collation",sqlAlterHelp:"sql-altercollation.html",sqlCreateHelp:"sql-createcollation.html",dialogHelp:t("help.static",{filename:"collation_dialog.html"}),label:e("Collation"),collection_type:"coll-collation",hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_collation_on_coll",node:"coll-collation",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Collation..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_collation",node:"collation",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Collation..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_collation",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Collation..."),data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:(e,t)=>{let r=a.Browser.Nodes.collation;return new n.default({rolesList:()=>(0,i.getNodeListByName)("role",e,t,{cacheLevel:"server"}),schemaList:()=>(0,i.getNodeListByName)("schema",e,t,{cacheLevel:"database"}),collationsList:()=>(0,i.getNodeAjaxOptions)("get_collations",r,e,t,{cacheLevel:"server"})},{owner:o.serverInfo[e.server._id].user.name,schema:"schema"in e?e.schema.label:""})}})),o.Nodes.collation}.apply(t,o))||(e.exports=r)},29617:(e,t,a)=>{var o,r,n=a(24994)(a(70741));o=[a(98351),a(50553),a(35244),a(51268),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r){return o.Nodes["coll-domain_constraints"]||(a.Browser.Nodes["coll-domain_constraints"]=a.Browser.Collection.extend({node:"domain_constraints",label:e("Domain Constraints"),type:"coll-domain_constraints",columns:["name","description"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:!1})),o.Nodes.domain_constraints||(a.Browser.Nodes.domain_constraints=o.Node.extend({type:"domain_constraints",sqlAlterHelp:"sql-alterdomain.html",sqlCreateHelp:"sql-alterdomain.html",dialogHelp:t("help.static",{filename:"domain_constraint_dialog.html"}),label:e("Domain Constraints"),collection_type:"coll-domain_constraints",hasSQL:!0,hasDepends:!0,parent_type:["domain"],Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_domain_on_coll",node:"coll-domain_constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Domain Constraint..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_domain_constraints",node:"domain_constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Domain Constraint..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_domain_constraints",node:"domain",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Domain Constraint..."),data:{action:"create",check:!1},enable:"canCreate"}]))},canDrop:r.isTreeItemOfChildOfSchema,getSchema:function(){return new n.default}})),o.Nodes.domain}.apply(t,o))||(e.exports=r)},86738:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=n(a(31528));o=[a(98351),a(50553),a(51268),a(4372),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r){return a.Nodes["coll-domain"]||(a.Nodes["coll-domain"]=a.Collection.extend({node:"domain",label:e("Domains"),type:"coll-domain",columns:["name","owner","description"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),a.Nodes.domain||(a.Nodes.domain=o.SchemaChildNode.extend({type:"domain",sqlAlterHelp:"sql-alterdomain.html",sqlCreateHelp:"sql-createdomain.html",dialogHelp:t("help.static",{filename:"domain_dialog.html"}),label:e("Domain"),collection_type:"coll-domain",hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_domain_on_coll",node:"coll-domain",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Domain..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_domain",node:"domain",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Domain..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_domain",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Domain..."),data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){return new l.default({role:()=>(0,i.getNodeListByName)("role",e,t),schema:()=>(0,i.getNodeListByName)("schema",e,t,{cacheLevel:"database"}),basetype:()=>(0,i.getNodeAjaxOptions)("get_types",this,e,t,{cacheNode:"type"}),collation:()=>(0,i.getNodeAjaxOptions)("get_collations",this,e,t,{cacheLevel:"database",cacheNode:"schema"})},{owner:a.serverInfo[e.server._id].user.name,schema:t.label,basensp:t.label})}})),a.Nodes.domain}.apply(t,o))||(e.exports=r)},17439:(e,t,a)=>{var o,r,n=a(52080);o=[a(98351),a(50553),a(51268),a(59220),a(68938)],void 0===(r=function(e,t,a){return a.Nodes["coll-foreign_table_column"]||(a.Nodes["coll-foreign_table_column"]=a.Collection.extend({node:"foreign_table_column",label:e("Columns"),type:"coll-foreign_table_column",columns:["name","cltype","description"]})),a.Nodes.foreign_table_column||(a.Nodes.foreign_table_column=a.Node.extend({parent_type:["foreign_table"],collection_type:["coll-foreign_table"],type:"foreign_table_column",label:e("Column"),hasSQL:!0,sqlAlterHelp:"sql-altertable.html",sqlCreateHelp:"sql-altertable.html",dialogHelp:t("help.static",{filename:"column_dialog.html"}),canDrop:!0,canDropCascade:!1,hasDepends:!0,hasStatistics:!0,Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_column_on_coll",node:"coll-foreign_table_column",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),data:{action:"create"},enable:"canCreate"},{name:"create_column_onTable",node:"foreign_table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),data:{action:"create"},enable:"canCreate"}]))},getSchema:function(e,t){return(0,n.getNodeColumnSchema)(e,t,a)}})),a.Nodes.foreign_table_column}.apply(t,o))||(e.exports=r)},54570:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=a(30660),c=a(21164),s=n(a(52080)),d=n(a(2543)),p=n(a(86498));o=[a(58116),a(98351),a(50553),a(51268),a(4372),a(59220),a(68938),a(24848),a(84811)],void 0===(r=function(e,t,a,o,r,n){return o.Nodes["coll-foreign_table"]||(o.Nodes["coll-foreign_table"]=o.Collection.extend({node:"foreign_table",label:t("Foreign Tables"),type:"coll-foreign_table",columns:["name","owner","description"],canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema})),o.Nodes.foreign_table||(o.Nodes.foreign_table=r.SchemaChildNode.extend({type:"foreign_table",sqlAlterHelp:"sql-alterforeigntable.html",sqlCreateHelp:"sql-createforeigntable.html",dialogHelp:a("help.static",{filename:"foreign_table_dialog.html"}),label:t("Foreign Table"),collection_type:"coll-foreign_table",hasSQL:!0,hasDepends:!0,width:o.stdW.md+"px",hasScriptTypes:["create","select","insert","update","delete"],parent_type:["schema"],Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_foreign_table_on_coll",node:"coll-foreign_table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:t("Foreign Table..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_foreign_table",node:"foreign_table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:t("Foreign Table..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_foreign_table",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:t("Foreign Table..."),data:{action:"create",check:!1},enable:"canCreate"},{name:"enable_all_triggers",node:"foreign_table",module:this,applies:["object","context"],callback:"enable_triggers_on_table",category:t("Trigger(s)"),priority:4,label:t("Enable All"),enable:"canCreate_with_trigger_enable",data:{data_disabled:t("The selected tree node does not support this option."),action:"create"}},{name:"disable_all_triggers",node:"foreign_table",module:this,applies:["object","context"],callback:"disable_triggers_on_table",category:t("Trigger(s)"),priority:4,label:t("Disable All"),enable:"canCreate_with_trigger_disable",data:{data_disabled:t("The selected tree node does not support this option."),action:"create"}}]))},callbacks:{enable_triggers_on_table:function(t){e.enableTriggers(o.tree,p.default,this.generate_url.bind(this),t)},disable_triggers_on_table:function(t){e.disableTriggers(o.tree,p.default,this.generate_url.bind(this),t)}},canCreate_with_trigger_enable:function(e){return e.tigger_count>0&&(0==e.has_enable_triggers||e.has_enable_triggers<e.tigger_count)},canCreate_with_trigger_disable:function(e){return e.tigger_count>0&&e.has_enable_triggers>0},getSchema:function(e,t){return new s.default((a=>(0,c.getNodePrivilegeRoleSchema)("",e,t,a)),(()=>(0,l.getNodeVariableSchema)(this,e,t,!1,!1)),(a=>(0,i.getNodeAjaxOptions)("get_columns",o.Nodes.foreign_table,e,t,{urlParams:a,useCache:!1})),{role:()=>(0,i.getNodeListByName)("role",e,t),schema:()=>(0,i.getNodeListByName)("schema",e,t,{cacheLevel:"database"}),foreignServers:()=>(0,i.getNodeAjaxOptions)("get_foreign_servers",this,e,t,{cacheLevel:"database"},(e=>d.default.reject(e,(function(e){return""==e.label||null==e.label})))),tables:()=>(0,i.getNodeAjaxOptions)("get_tables",this,e,t,{cacheLevel:"database"}),nodeInfo:e,nodeData:t,pgBrowser:o},{owner:o.serverInfo[e.server._id].user.name,basensp:e.schema?e.schema.label:""})}})),o.Nodes.foreign_table}.apply(t,o))||(e.exports=r)},21084:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=n(a(6450));o=[a(98351),a(50553),a(35244),a(51268),a(4372),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r,n){return o.Nodes["coll-fts_configuration"]||(a.Browser.Nodes["coll-fts_configuration"]=a.Browser.Collection.extend({node:"fts_configuration",label:e("FTS Configurations"),type:"coll-fts_configuration",columns:["name","description"],canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema})),o.Nodes.fts_configuration||(a.Browser.Nodes.fts_configuration=r.SchemaChildNode.extend({type:"fts_configuration",sqlAlterHelp:"sql-altertsconfig.html",sqlCreateHelp:"sql-createtsconfig.html",dialogHelp:t("help.static",{filename:"fts_configuration_dialog.html"}),label:e("FTS Configuration"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_fts_configuration_on_schema",node:"schema",module:this,category:"create",priority:4,applies:["object","context"],callback:"show_obj_properties",label:e("FTS Configuration..."),data:{action:"create"},enable:"canCreate"},{name:"create_fts_configuration_on_coll",module:this,priority:4,node:"coll-fts_configuration",applies:["object","context"],callback:"show_obj_properties",category:"create",label:e("FTS Configuration..."),data:{action:"create"},enable:"canCreate"},{name:"create_fts_configuration",node:"fts_configuration",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Configuration..."),data:{action:"create"},enable:"canCreate"}]))},getSchema:function(e,t){return new l.default({role:()=>(0,i.getNodeListByName)("role",e,t),schema:()=>(0,i.getNodeListById)(o.Nodes.schema,e,t),parsers:()=>(0,i.getNodeAjaxOptions)("parsers",this,e,t),copyConfig:()=>(0,i.getNodeAjaxOptions)("copyConfig",this,e,t),tokens:()=>(0,i.getNodeAjaxOptions)("tokens",this,e,t,{urlWithId:!0}),dictionaries:()=>(0,i.getNodeAjaxOptions)("dictionaries",this,e,t,{cacheLevel:"fts_configuration",cacheNode:"fts_configuration"})},{owner:o.serverInfo[e.server._id].user.name,schema:t._id})}})),o.Nodes["coll-fts_configuration"]}.apply(t,o))||(e.exports=r)},4873:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=n(a(93341));o=[a(98351),a(50553),a(35244),a(51268),a(4372),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r,n){return o.Nodes["coll-fts_dictionary"]||(a.Browser.Nodes["coll-fts_dictionary"]=a.Browser.Collection.extend({node:"fts_dictionary",label:e("FTS Dictionaries"),type:"coll-fts_dictionary",columns:["name","description"],canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema})),o.Nodes.fts_dictionary||(a.Browser.Nodes.fts_dictionary=r.SchemaChildNode.extend({type:"fts_dictionary",sqlAlterHelp:"sql-altertsdictionary.html",sqlCreateHelp:"sql-createtsdictionary.html",dialogHelp:t("help.static",{filename:"fts_dictionary_dialog.html"}),label:e("FTS Dictionary"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_fts_dictionary_on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Dictionary..."),data:{action:"create"},enable:"canCreate"},{name:"create_fts_dictionary_on_coll",node:"coll-fts_dictionary",module:this,applies:["object","context"],priority:4,callback:"show_obj_properties",category:"create",label:e("FTS Dictionary..."),data:{action:"create"},enable:"canCreate"},{name:"create_fts_dictionary",node:"fts_dictionary",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Dictionary..."),data:{action:"create"},enable:"canCreate"}]))},getSchema:function(e,t){return new l.default({role:()=>(0,i.getNodeListByName)("role",e,t),schema:()=>(0,i.getNodeListById)(o.Nodes.schema,e,t),fts_template:()=>(0,i.getNodeAjaxOptions)("fetch_templates",this,e,t,{cacheNode:"fts_template"})},{owner:o.serverInfo[e.server._id].user.name,schema:t._id})}})),o.Nodes.fts_dictionary}.apply(t,o))||(e.exports=r)},62250:(e,t,a)=>{var o,r,n=a(24994)(a(40400)),i=a(42371);o=[a(98351),a(50553),a(35244),a(51268),a(4372),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r,l){return o.Nodes["coll-fts_parser"]||(a.Browser.Nodes["coll-fts_parser"]=a.Browser.Collection.extend({node:"fts_parser",label:e("FTS Parsers"),type:"coll-fts_parser",columns:["name","description"],canDrop:l.isTreeItemOfChildOfSchema,canDropCascade:l.isTreeItemOfChildOfSchema})),o.Nodes.fts_parser||(a.Browser.Nodes.fts_parser=r.SchemaChildNode.extend({type:"fts_parser",sqlAlterHelp:"sql-altertsparser.html",sqlCreateHelp:"sql-createtsparser.html",dialogHelp:t("help.static",{filename:"fts_parser_dialog.html"}),label:e("FTS Parser"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_fts_parser_on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Parser..."),data:{action:"create"},enable:"canCreate"},{name:"create_fts_parser_on_coll",node:"coll-fts_parser",applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Parser..."),data:{action:"create"},module:this,enable:"canCreate"},{name:"create_fts_parser",node:"fts_parser",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Parser..."),data:{action:"create"},enable:"canCreate"}]))},getSchema:(e,t)=>{let r=a.Browser.Nodes.fts_parser;return new n.default({prsstartList:()=>(0,i.getNodeAjaxOptions)("start_functions",r,e,t,{cacheLevel:"database"}),prstokenList:()=>(0,i.getNodeAjaxOptions)("token_functions",r,e,t,{cacheLevel:"database"}),prsendList:()=>(0,i.getNodeAjaxOptions)("end_functions",r,e,t,{cacheLevel:"database"}),prslextypeList:()=>(0,i.getNodeAjaxOptions)("lextype_functions",r,e,t,{cacheLevel:"database"}),prsheadlineList:()=>(0,i.getNodeAjaxOptions)("headline_functions",r,e,t,{cacheLevel:"database"}),schemaList:()=>(0,i.getNodeListById)(o.Nodes.schema,e,t,{cacheLevel:"database"})},{schema:t._id})}})),o.Nodes["coll-fts_parser"]}.apply(t,o))||(e.exports=r)},4794:(e,t,a)=>{var o,r,n=a(24994)(a(14912)),i=a(42371);o=[a(98351),a(50553),a(35244),a(51268),a(4372),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r,l){return o.Nodes["coll-fts_template"]||(a.Browser.Nodes["coll-fts_template"]=a.Browser.Collection.extend({node:"fts_template",label:e("FTS Templates"),type:"coll-fts_template",columns:["name","description"],canDrop:l.isTreeItemOfChildOfSchema,canDropCascade:l.isTreeItemOfChildOfSchema})),o.Nodes.fts_template||(a.Browser.Nodes.fts_template=r.SchemaChildNode.extend({type:"fts_template",sqlAlterHelp:"sql-altertstemplate.html",sqlCreateHelp:"sql-createtstemplate.html",dialogHelp:t("help.static",{filename:"fts_template_dialog.html"}),label:e("FTS Template"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_fts_template_on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Template..."),data:{action:"create"},enable:"canCreate"},{name:"create_fts_template_on_coll",node:"coll-fts_template",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Template..."),data:{action:"create"},enable:"canCreate"},{name:"create_fts_template",node:"fts_template",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Template..."),data:{action:"create"},enable:"canCreate"}]))},getSchema:(e,t)=>{let r=a.Browser.Nodes.fts_template;return new n.default({initFunctionList:()=>(0,i.getNodeAjaxOptions)("get_init",r,e,t,{cacheLevel:"database"}),lexisFunctionList:()=>(0,i.getNodeAjaxOptions)("get_lexize",r,e,t,{cacheLevel:"database"}),schemaList:()=>(0,i.getNodeListById)(o.Nodes.schema,e,t)},{schema:t._id})}})),o.Nodes.fts_template}.apply(t,o))||(e.exports=r)},44170:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=n(a(38320)),c=a(21164),s=a(30660);o=[a(98351),a(50553),a(51268),a(4372),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r){return a.Nodes["coll-function"]||(a.Nodes["coll-function"]=a.Collection.extend({node:"function",label:e("Functions"),type:"coll-function",columns:["name","funcowner","description"],hasStatistics:!0,canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),a.Nodes.function||(a.Nodes.function=o.SchemaChildNode.extend({type:"function",sqlAlterHelp:"sql-alterfunction.html",sqlCreateHelp:"sql-createfunction.html",dialogHelp:t("help.static",{filename:"function_dialog.html"}),label:e("Function"),collection_type:"coll-function",hasSQL:!0,hasDepends:!0,width:a.stdW.md+"px",hasStatistics:!0,hasScriptTypes:["create","select"],Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_function_on_coll",node:"coll-function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Function..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_function",node:"function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Function..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_function",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Function..."),data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){return new l.default((a=>(0,c.getNodePrivilegeRoleSchema)(this,e,t,a)),(()=>(0,s.getNodeVariableSchema)(this,e,t,!1,!1)),{role:()=>(0,i.getNodeListByName)("role",e,t),schema:()=>(0,i.getNodeListById)(a.Nodes.schema,e,t,{cacheLevel:"database"}),getTypes:()=>(0,i.getNodeAjaxOptions)("get_types",this,e,t),getLanguage:()=>(0,i.getNodeAjaxOptions)("get_languages",this,e,t),getSupportFunctions:()=>(0,i.getNodeAjaxOptions)("get_support_functions",this,e,t,{cacheNode:"function"})},{node_info:e},{type:a.Nodes.function.type},{funcowner:a.serverInfo[e.server._id].user.name,pronamespace:e.schema?e.schema._id:null,lanname:"sql"})}})),a.Nodes.function}.apply(t,o))||(e.exports=r)},17:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=n(a(38320)),c=a(21164),s=a(30660);o=[a(98351),a(50553),a(35244),a(51268),a(4372),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r,n){return o.Nodes["coll-procedure"]||(a.Browser.Nodes["coll-procedure"]=a.Browser.Collection.extend({node:"procedure",label:e("Procedures"),type:"coll-procedure",columns:["name","funcowner","description"],hasStatistics:!0,canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema})),o.Nodes.procedure||(a.Browser.Nodes.procedure=r.SchemaChildNode.extend({type:"procedure",sqlAlterHelp:"sql-alterprocedure.html",sqlCreateHelp:"sql-createprocedure.html",dialogHelp:t("help.static",{filename:"procedure_dialog.html"}),label:e("Procedure"),collection_type:"coll-procedure",hasSQL:!0,hasDepends:!0,hasStatistics:!0,hasScriptTypes:["create","exec"],width:o.stdW.md+"px",Init:function(){this.proc_initialized||(this.proc_initialized=!0,o.add_menus([{name:"create_procedure_on_coll",node:"coll-procedure",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Procedure..."),data:{action:"create",check:!1},enable:"canCreateProc"},{name:"create_procedure",node:"procedure",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Procedure..."),data:{action:"create",check:!0},enable:"canCreateProc"},{name:"create_procedure",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Procedure..."),data:{action:"create",check:!0},enable:"canCreateProc"}]))},canCreateProc:function(e,t){let a=o.tree.getTreeNodeHierarchy(t);return!("catalog"in a)&&("server"in a&&("ppas"==a.server.server_type||"pg"==a.server.server_type&&a.server.version>=11e4))},getSchema:function(e,t){return new l.default((a=>(0,c.getNodePrivilegeRoleSchema)(this,e,t,a)),(()=>(0,s.getNodeVariableSchema)(this,e,t,!1,!1)),{role:()=>(0,i.getNodeListByName)("role",e,t),schema:()=>(0,i.getNodeListById)(o.Nodes.schema,e,t,{cacheLevel:"database"}),getTypes:()=>(0,i.getNodeAjaxOptions)("get_types",this,e,t),getLanguage:()=>(0,i.getNodeAjaxOptions)("get_languages",this,e,t),getSupportFunctions:()=>(0,i.getNodeAjaxOptions)("get_support_functions",this,e,t,{cacheNode:"function"})},{node_info:e},{type:o.Nodes.procedure.type},{funcowner:o.serverInfo[e.server._id].user.name,pronamespace:e.schema?e.schema._id:null,lanname:"ppas"!=e.server.server_type?"sql":"edbspl"})}})),o.Nodes.procedure}.apply(t,o))||(e.exports=r)},54051:(e,t,a)=>{var o,r,n=a(24994),i=n(a(65175)),l=a(42371),c=a(30660),s=a(21164),d=n(a(2543));o=[a(98351),a(50553),a(51268),a(4372),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r){return a.Nodes["coll-trigger_function"]||(a.Nodes["coll-trigger_function"]=a.Collection.extend({node:"trigger_function",label:e("Trigger functions"),type:"coll-trigger_function",columns:["name","funcowner","description"],hasStatistics:!0,canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),a.Nodes.trigger_function||(a.Nodes.trigger_function=o.SchemaChildNode.extend({type:"trigger_function",sqlAlterHelp:"plpgsql-trigger.html",sqlCreateHelp:"plpgsql-trigger.html",dialogHelp:t("help.static",{filename:"trigger_function_dialog.html"}),label:e("Trigger function"),collection_type:"coll-trigger_function",canEdit:function(e,t){let o=a.tree.findNodeByDomElement(t);return!(!o||"trigger"===o.parentNode.getData()._type)},hasSQL:!0,showMenu:function(e,t){return this.canEdit(e,t)},hasDepends:!0,hasStatistics:!0,url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_trigger_function_on_coll",node:"coll-trigger_function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger function..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger_function",node:"trigger_function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger function..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger_function",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger function..."),data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){return new i.default((a=>(0,s.getNodePrivilegeRoleSchema)("",e,t,a)),(()=>(0,c.getNodeVariableSchema)(this,e,t,!1,!1)),{role:()=>(0,l.getNodeListByName)("role",e,t),schema:()=>(0,l.getNodeListById)(a.Nodes.schema,e,t,{cacheLevel:"database"}),language:()=>(0,l.getNodeAjaxOptions)("get_languages",this,e,t,{noCache:!0},(e=>d.default.reject(e,(function(e){return"sql"==e.label})))),nodeInfo:e},{funcowner:a.serverInfo[e.server._id].user.name,pronamespace:e.schema?e.schema._id:null})}})),a.Nodes.trigger_function}.apply(t,o))||(e.exports=r)},61874:(e,t,a)=>{var o,r,n=a(24994)(a(57416));o=[a(98351),a(35244),a(51268),a(4372),a(68938)],void 0===(r=function(e,t,a,o){return a.Nodes["coll-operator"]||(t.Browser.Nodes["coll-operator"]=t.Browser.Collection.extend({node:"operator",label:e("Operators"),type:"coll-operator",columns:["name","owner","description"],canDrop:!1,canDropCascade:!1,canSelect:!1})),a.Nodes.operator||(t.Browser.Nodes.operator=o.SchemaChildNode.extend({type:"operator",sqlAlterHelp:"sql-alteroperator.html",sqlCreateHelp:"sql-createoperator.html",label:e("Operator"),collection_type:"coll-operator",hasSQL:!0,hasDepends:!1,canDrop:!1,canDropCascade:!1,Init:function(){this.initialized||(this.initialized=!0)},getSchema:()=>new n.default})),a.Nodes.operator}.apply(t,o))||(e.exports=r)},25352:(e,t,a)=>{var o,r,n=a(24994)(a(62518));o=[a(98351),a(50553),a(51268),a(68938)],void 0===(r=function(e,t,a){return a.Nodes["coll-edbfunc"]||(a.Nodes["coll-edbfunc"]=a.Collection.extend({node:"edbfunc",label:e("Functions"),type:"coll-edbfunc",columns:["name","funcowner","description"],canDrop:!1,canDropCascade:!1})),a.Nodes.edbfunc||(a.Nodes.edbfunc=a.Node.extend({type:"edbfunc",dialogHelp:t("help.static",{filename:"edbfunc_dialog.html"}),label:e("Function"),collection_type:"coll-edbfunc",hasDepends:!0,canEdit:!1,hasSQL:!0,hasScriptTypes:[],parent_type:["package"],Init:function(){this.initialized||(this.initialized=!0)},canDrop:!1,canDropCascade:!1,getSchema:()=>new n.default({},{name:"sysfunc"})})),a.Nodes.edbfunc}.apply(t,o))||(e.exports=r)},78590:(e,t,a)=>{var o,r,n=a(24994)(a(62518));o=[a(98351),a(50553),a(35244),a(51268),a(68938)],void 0===(r=function(e,t,a,o){return o.Nodes["coll-edbproc"]||(a.Browser.Nodes["coll-edbproc"]=a.Browser.Collection.extend({node:"edbproc",label:e("Procedures"),type:"coll-edbproc",columns:["name","funcowner","description"],hasStatistics:!0,canDrop:!1,canDropCascade:!1})),o.Nodes.edbproc||(a.Browser.Nodes.edbproc=o.Node.extend({type:"edbproc",dialogHelp:t("help.static",{filename:"edbproc_dialog.html"}),label:e("Procedure"),collection_type:"coll-edbproc",hasDepends:!0,canEdit:!1,hasSQL:!0,hasScriptTypes:[],parent_type:["package"],Init:function(){this.proc_initialized||(this.proc_initialized=!0)},canDrop:!1,canDropCascade:!1,getSchema:()=>new n.default({},{name:"sysproc"})})),o.Nodes.edbproc}.apply(t,o))||(e.exports=r)},56732:(e,t,a)=>{var o,r,n=a(24994)(a(41522));o=[a(98351),a(50553),a(51268),a(68938)],void 0===(r=function(e,t,a){return a.Nodes["coll-edbvar"]||(a.Nodes["coll-edbvar"]=a.Collection.extend({node:"edbvar",label:e("Variables"),type:"coll-edbvar",columns:["name","funcowner","description"],canDrop:!1,canDropCascade:!1})),a.Nodes.edbvar||(a.Nodes.edbvar=a.Node.extend({type:"edbvar",dialogHelp:t("help.static",{filename:"edbvar_dialog.html"}),label:e("Function"),collection_type:"coll-edbvar",canEdit:!1,hasSQL:!0,hasScriptTypes:[],parent_type:["package"],Init:function(){this.initialized||(this.initialized=!0)},canDrop:!1,canDropCascade:!1,getSchema:()=>new n.default})),a.Nodes.edbvar}.apply(t,o))||(e.exports=r)},85332:(e,t,a)=>{var o,r,n=a(24994)(a(46874)),i=a(21164),l=a(42371);o=[a(98351),a(50553),a(51268),a(4372),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r){return a.Nodes["coll-package"]||(a.Nodes["coll-package"]=a.Collection.extend({node:"package",label:e("Packages"),type:"coll-package",columns:["name","owner","description"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),a.Nodes.package||(a.Nodes.package=o.SchemaChildNode.extend({type:"package",epasHelp:!0,dialogHelp:t("help.static",{filename:"package_dialog.html"}),label:e("Package"),collection_type:"coll-package",hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_package_on_coll",node:"coll-package",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Package..."),data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_package",node:"package",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Package..."),data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_package",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Package..."),data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"}]))},canCreate:function(e,t,o){if(o&&!o.check)return!0;let r=a.tree.getTreeNodeHierarchy(t),n=r.server;return(!n||"pg"!==n.server_type)&&null==r.catalog},getSchema:(e,t)=>{let o=a.Nodes.package;return new n.default((a=>(0,i.getNodePrivilegeRoleSchema)(o,e,t,a)),{schemas:()=>(0,l.getNodeListByName)("schema",e,t,{cacheLevel:"database"}),node_info:e},{schema:"schema"in e?e.schema.label:""})}})),a.Nodes.package}.apply(t,o))||(e.exports=r)},36562:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=a(21164),c=n(a(53896));o=[a(98351),a(50553),a(51268),a(4372),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r){return a.Nodes["coll-sequence"]||(a.Nodes["coll-sequence"]=a.Collection.extend({node:"sequence",label:e("Sequences"),type:"coll-sequence",columns:["name","seqowner","comment"],hasStatistics:!0,canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),a.Nodes.sequence||(a.Nodes.sequence=o.SchemaChildNode.extend({type:"sequence",sqlAlterHelp:"sql-altersequence.html",sqlCreateHelp:"sql-createsequence.html",dialogHelp:t("help.static",{filename:"sequence_dialog.html"}),label:e("Sequence"),collection_type:"coll-sequence",hasSQL:!0,hasDepends:!0,hasStatistics:!0,Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_sequence_on_coll",node:"coll-sequence",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Sequence..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_sequence",node:"sequence",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Sequence..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_sequence",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Sequence..."),data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){return new c.default((a=>(0,l.getNodePrivilegeRoleSchema)(this,e,t,a)),{role:()=>(0,i.getNodeListByName)("role",e,t),schema:()=>(0,i.getNodeListByName)("schema",e,t,{},(e=>!e.label.match(/^pg_/))),allTables:()=>(0,i.getNodeListByName)("table",e,t,{includeItemKeys:["_id"]}),getColumns:o=>(0,i.getNodeAjaxOptions)("get_columns",a.Nodes.table,e,t,{urlParams:o,useCache:!1},(e=>e.map((e=>({value:e.name,image:"icon-column",label:e.name})))))},{seqowner:a.serverInfo[e.server._id].user.name,schema:t.label})}})),a.Nodes.sequence}.apply(t,o))||(e.exports=r)},16493:(e,t,a)=>{var o,r,n=a(24994)(a(18233));o=[a(98351),a(51268),a(68938)],void 0===(r=function(e,t){return t.Nodes["coll-catalog"]||(t.Nodes["coll-catalog"]=t.Collection.extend({node:"catalog",label:e("Catalogs"),type:"coll-catalog",columns:["name","namespaceowner","description"],canDrop:!1,canDropCascade:!1})),t.Nodes.catalog||(t.Nodes.catalog=t.Node.extend({parent_type:"database",type:"catalog",label:e("Catalog"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0)},getSchema:function(e){return new n.default({namespaceowner:t.serverInfo[e.server._id].user.name})}})),t.Nodes.catalog}.apply(t,o))||(e.exports=r)},4372:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaChildNode=void 0;var o=i(a(84726)),r=i(a(59220));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(n=function(e){return e?a:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=n(t);if(a&&a.has(e))return a.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var l=r?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,a&&a.set(e,o),o}t.SchemaChildNode=o.extend({parent_type:["schema","catalog"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema,canCreate:r.childCreateMenuEnabled},!1)},97023:(e,t,a)=>{var o,r,n=a(24994)(a(15579)),i=a(21164),l=a(42371);o=[a(98351),a(50553),a(35244),a(51268),a(68938)],void 0===(r=function(e,t,a,o){return o.Nodes["coll-schema"]||(o.Nodes["coll-schema"]=o.Collection.extend({node:"schema",label:e("Schemas"),type:"coll-schema",columns:["name","namespaceowner","description"]})),o.Nodes.schema||(o.Nodes.schema=o.Node.extend({parent_type:"database",type:"schema",sqlAlterHelp:"sql-alterschema.html",sqlCreateHelp:"sql-createschema.html",dialogHelp:t("help.static",{filename:"schema_dialog.html"}),label:e("Schema"),hasSQL:!0,canDrop:!0,canDropCascade:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_schema_on_coll",node:"coll-schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Schema..."),data:{action:"create"}},{name:"create_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Schema..."),data:{action:"create"}},{name:"create_schema",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Schema..."),data:{action:"create"},enable:"can_create_schema"},{name:"generate_erd",node:"schema",module:this,applies:["object","context"],callback:"generate_erd",priority:5,label:e("ERD For Schema")}]))},can_create_schema:function(e){return o.Nodes.database.is_conn_allow.call(this,e)},callbacks:{generate_erd:function(e){let t=e||{},r=o.tree,n=t.item||r.selected(),i=n?r.itemData(n):void 0;a.Tools.ERD.showErdTool(i,n,!0)}},getSchema:function(e,t){let a=o.Nodes.schema;return new n.default((o=>(0,i.getNodePrivilegeRoleSchema)(a,e,t,o)),{roles:()=>(0,l.getNodeListByName)("role",e,t,{cacheLevel:"database"}),server_info:o.serverInfo[e.server._id],nodeInfo:e},{namespaceowner:o.serverInfo[e.server._id].user.name})}}),o.tableChildTreeNodeHierarchy=function(e){return o.tree.getTreeNodeHierarchy(e)}),o.Nodes.schema}.apply(t,o))||(e.exports=r)},59220:(e,t,a)=>{var o=a(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.childCreateMenuEnabled=function(e,t,a){if(a&&!a.check)return!0;let o=r.tree.findNodeByDomElement(t);return!!o&&o.anyFamilyMember((e=>"schema"===e.getData()._type))},t.isTreeItemOfChildOfSchema=function(e,t){let a=r.tree.findNodeByDomElement(t);return!!a&&n(a)},t.isTreeNodeOfSchemaChild=n;let r=o(a(35244)).default.Browser;function n(e){return e.anyParent((e=>"schema"===e.getData()._type))}},54762:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=n(a(51344)),c=n(a(2543));o=[a(98351),a(50553),a(35244),a(51268),a(4372),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r,n){return o.Nodes["coll-synonym"]||(a.Browser.Nodes["coll-synonym"]=a.Browser.Collection.extend({node:"synonym",label:e("Synonyms"),type:"coll-synonym",columns:["name","owner","is_public_synonym"],canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema})),o.Nodes.synonym||(a.Browser.Nodes.synonym=r.SchemaChildNode.extend({type:"synonym",epasHelp:!0,dialogHelp:t("help.static",{filename:"synonym_dialog.html"}),label:e("Synonym"),collection_type:"coll-synonym",hasSQL:!0,hasDepends:!0,parent_type:["schema","catalog"],Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_synonym_on_coll",node:"coll-synonym",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Synonym..."),data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_synonym",node:"synonym",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Synonym..."),data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_synonym",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Synonym..."),data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"}]))},getSchema:function(e,t){return new l.default({role:()=>(0,i.getNodeListByName)("role",e,t),schema:()=>(0,i.getNodeListByName)("schema",e,t,{cacheLevel:"database"}),synobjschema:()=>(0,i.getNodeListByName)("schema",e,t,{},(e=>e&&-1==c.default.indexOf(["pg_catalog","sys","pgagent","information_schema","dbms_job_procedure"],e.label))),getTargetObjectOptions:(a,o)=>(0,i.getNodeAjaxOptions)("get_target_objects",this,e,t,{urlParams:{trgTyp:a,trgSchema:o},useCache:!1})},e,{owner:o.serverInfo[e.server._id].user.name,schema:t.label,synobjschema:t.label})},canCreate:function(e,t,a){if(a&&!a.check)return!0;let r=o.tree.getTreeNodeHierarchy(t),n=r.server;return(!n||"pg"!==n.server_type)&&null==r.catalog}})),o.Nodes.synonym}.apply(t,o))||(e.exports=r)},24848:(e,t,a)=>{var o,r,n=a(24994),i=a(83950),l=n(a(2543));o=[a(98351),a(50553),a(51268),a(59220),a(68938)],void 0===(r=function(e,t,a,o){return a.Nodes["coll-column"]||(a.Nodes["coll-column"]=a.Collection.extend({node:"column",label:e("Columns"),type:"coll-column",columns:["name","cltype","is_pk","attnotnull","description"],canDrop:o.isTreeItemOfChildOfSchema,canDropCascade:!1})),a.Nodes.column||(a.Nodes.column=a.Node.extend({parent_type:["table","view","mview","foreign_table"],collection_type:["coll-table","coll-view","coll-mview"],type:"column",label:e("Column"),hasSQL:!0,sqlAlterHelp:"sql-altertable.html",sqlCreateHelp:"sql-altertable.html",dialogHelp:t("help.static",{filename:"column_dialog.html"}),canDrop:function(e,t){let o=a.tree.findNodeByDomElement(t);return!!o&&o.anyParent((e=>"table"===e.getData()._type&&!e.anyParent((e=>"catalog"===e.getData()._type))))},hasDepends:!0,hasStatistics:!0,Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_column_on_coll",node:"coll-column",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_column",node:"column",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_column_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_column_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),data:{action:"create",check:!0},enable:"canCreate"}]))},getSchema:function(e,t){return(0,i.getNodeColumnSchema)(e,t,a)},canCreate:function(e,t,o){if(o&&!o.check)return!0;let r=a.tree,n=t,i=e,c=[];for(;n;){if(l.default.indexOf(["schema"],i._type)>-1)return!0;if(l.default.indexOf(["view","coll-view","mview","coll-mview"],i._type)>-1){c.push(i._type);break}c.push(i._type),n=r.hasParent(n)?r.parent(n):null,i=n?r.itemData(n):null}return!(l.default.indexOf(c,"catalog")>-1||l.default.indexOf(c,"coll-view")>-1||l.default.indexOf(c,"coll-mview")>-1||l.default.indexOf(c,"mview")>-1||l.default.indexOf(c,"view")>-1)}})),a.Nodes.column}.apply(t,o))||(e.exports=r)},43556:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=n(a(86154)),c=n(a(6520));o=[a(98351),a(50553),a(35244),a(51268),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r){return o.Nodes["coll-compound_trigger"]||(a.Browser.Nodes["coll-compound_trigger"]=a.Browser.Collection.extend({node:"compound_trigger",label:e("Compound Triggers"),type:"coll-compound_trigger",columns:["name","description"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),o.Nodes.compound_trigger||(a.Browser.Nodes.compound_trigger=o.Node.extend({parent_type:["table","view","partition"],collection_type:["coll-table","coll-view"],type:"compound_trigger",label:e("Compound Trigger"),hasSQL:!0,hasDepends:!0,width:o.stdW.sm+"px",epasHelp:!0,dialogHelp:t("help.static",{filename:"compound_trigger_dialog.html"}),url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_compound_trigger_on_coll",node:"coll-compound_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_compound_trigger",node:"compound_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_compound_trigger_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_compound_trigger_onPartition",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"enable_compound_trigger",node:"compound_trigger",module:this,applies:["object","context"],callback:"enable_compound_trigger",priority:3,label:e("Enable compound trigger"),enable:"canCreate_with_compound_trigger_enable"},{name:"disable_compound_trigger",node:"compound_trigger",module:this,applies:["object","context"],callback:"disable_compound_trigger",priority:3,label:e("Disable compound trigger"),enable:"canCreate_with_compound_trigger_disable"},{name:"create_compound_trigger_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"}]))},callbacks:{enable_compound_trigger:function(e){let t=e||{},r=o.tree,n=t.item||r.selected(),i=n?r.itemData(n):void 0;if(!i)return!1;let l=i;(0,c.default)().put(this.generate_url(n,"enable",i,!0),{is_enable_trigger:"O"}).then((e=>{let{data:t}=e;1==t.success&&(a.Browser.notifier.success(t.info),r.removeIcon(n),l.icon="icon-compound_trigger",r.addIcon(n,{icon:l.icon}),r.updateAndReselectNode(n,l))})).catch((function(e){a.Browser.notifier.pgRespErrorNotify(e),r.refresh(n)}))},disable_compound_trigger:function(e){let t=e||{},r=o.tree,n=t.item||r.selected(),i=n?r.itemData(n):void 0;if(!i)return!1;let l=i;(0,c.default)().put(this.generate_url(n,"enable",i,!0),{is_enable_trigger:"D"}).then((e=>{let{data:t}=e;1==t.success&&(a.Browser.notifier.success(t.info),r.removeIcon(n),l.icon="icon-compound_trigger-bad",r.addIcon(n,{icon:l.icon}),r.updateAndReselectNode(n,l))})).catch((function(e){a.Browser.notifier.pgRespErrorNotify(e),r.refresh(n)}))}},canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema,getSchema:function(e,t){return new l.default({columns:()=>(0,i.getNodeListByName)("column",e,t,{cacheLevel:"column"})},e)},canCreate:function(e,t,a){if(a&&!a.check)return!0;let r=o.tree.getTreeNodeHierarchy(t),n=r.server;return(!n||!("pg"===n.server_type||n.version<12e4))&&null==r.catalog},canCreate_with_compound_trigger_enable:function(e,t,a){return!("view"in o.tree.getTreeNodeHierarchy(t))&&("icon-compound_trigger-bad"===e.icon&&this.canCreate(e,t,a))},canCreate_with_compound_trigger_disable:function(e,t,a){return!("view"in o.tree.getTreeNodeHierarchy(t))&&("icon-compound_trigger"===e.icon&&this.canCreate(e,t,a))}})),o.Nodes.compound_trigger}.apply(t,o))||(e.exports=r)},98432:(e,t,a)=>{var o,r,n=a(24994),i=n(a(190)),l=n(a(2543)),c=n(a(6520));o=[a(98351),a(50553),a(35244),a(51268),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r){return o.Nodes.check_constraint||(a.Browser.Nodes.check_constraint=o.Node.extend({type:"check_constraint",label:e("Check"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"check_dialog.html"}),hasSQL:!0,hasDepends:!0,parent_type:["table","partition","foreign_table"],url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_check_constraint_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Check..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"validate_check_constraint",node:"check_constraint",module:this,applies:["object","context"],callback:"validate_check_constraint",category:"validate",priority:4,label:e("Validate check constraint"),enable:"is_not_valid",data:{action:"edit",check:!0}}]))},is_not_valid:function(e,t,a){return!!this.canCreate(e,t,a)&&(e&&!e.valid)},callbacks:{validate_check_constraint:function(e){let t=e||{},r=this,n=o.tree,i=t.item||n.selected(),l=i?n.itemData(i):void 0;if(l){let e=l;(0,c.default)().get(r.generate_url(i,"validate",l,!0)).then((t=>{let{data:o}=t;1==o.success&&(a.Browser.notifier.success(o.info),n.removeIcon(i),e.valid=!0,e.icon="icon-check_constraint",n.addIcon(i,{icon:e.icon}),setTimeout((function(){n.deselect(i)}),10),setTimeout((function(){n.select(i)}),100))})).catch((e=>{a.Browser.notifier.pgRespErrorNotify(e),n.unload(i)}))}return!1}},canDrop:r.isTreeItemOfChildOfSchema,getSchema:function(){return new i.default},canCreate:function(e,t,a){if(a&&!a.check)return!0;let r=o.tree,n=t,i=e,c=[];for(;n;){if(l.default.indexOf(["schema"],i._type)>-1)return!0;c.push(i._type),n=r.hasParent(n)?r.parent(n):null,i=n?r.itemData(n):null}return l.default.indexOf(c,"catalog")<=-1}})),o.Nodes.check_constraint}.apply(t,o))||(e.exports=r)},84160:(e,t,a)=>{var o,r,n=a(24994),i=a(45886),l=n(a(2543));o=[a(98351),a(50553),a(35244),a(51268),a(68938)],void 0===(r=function(e,t,a,o){return o.Nodes.exclusion_constraint||(a.Browser.Nodes.exclusion_constraint=o.Node.extend({type:"exclusion_constraint",label:e("Exclusion constraint"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"exclusion_constraint_dialog.html"}),hasSQL:!0,parent_type:["table","partition"],canDrop:!0,canDropCascade:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Index size")],url_jump_after_node:"schema",width:o.stdW.md+"px",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_exclusion_constraint_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Exclusion constraint..."),data:{action:"create",check:!0},enable:"canCreate"}]))},is_not_valid:function(e){return e&&!e.valid},getSchema:function(e,t){return(0,i.getNodeExclusionConstraintSchema)(e,t,a.Browser)},canCreate:function(e,t,a){if(a&&!a.check)return!0;let r=o.tree,n=t,i=e,c=[],s=!1,d=!1;for(;n;){if(s||"table"!=i._type&&"partition"!=i._type||(s=!0,"is_partitioned"in i&&i.is_partitioned&&(d=!0)),l.default.indexOf(["schema"],i._type)>-1)return!d;if(l.default.indexOf(["foreign_table","coll-foreign_table"],i._type)>-1)return!1;c.push(i._type),n=r.hasParent(n)?r.parent(n):null,i=n?r.itemData(n):null}return!(l.default.indexOf(c,"catalog")>-1)&&!d}})),o.Nodes.exclusion_constraint}.apply(t,o))||(e.exports=r)},95288:(e,t,a)=>{var o,r,n=a(24994),i=a(75366),l=n(a(2543)),c=n(a(6520));o=[a(98351),a(50553),a(35244),a(51268),a(68938)],void 0===(r=function(e,t,a,o){return o.Nodes.foreign_key||(a.Browser.Nodes.foreign_key=o.Node.extend({type:"foreign_key",label:e("Foreign key"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"foreign_key_dialog.html"}),hasSQL:!0,parent_type:["table","partition"],canDrop:!0,canDropCascade:!0,hasDepends:!0,url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_foreign_key_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign key..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"validate_foreign_key",node:"foreign_key",module:this,applies:["object","context"],callback:"validate_foreign_key",priority:4,label:e("Validate foreign key"),enable:"is_not_valid"}]))},is_not_valid:function(e){return e&&!e.valid},callbacks:{validate_foreign_key:function(e){let t=e||{},r=this,n=o.tree,i=t.item||n.selected(),l=i?n.itemData(i):void 0;if(l){let e=l;(0,c.default)().get(r.generate_url(i,"validate",l,!0)).then((t=>{let{data:o}=t;1==o.success&&(a.Browser.notifier.success(o.info),n.removeIcon(i),e.valid=!0,e.icon="icon-foreign_key",n.addIcon(i,{icon:e.icon}),setTimeout((function(){n.deselect(i)}),10),setTimeout((function(){n.select(i)}),100))})).catch((e=>{a.Browser.notifier.pgRespErrorNotify(e),n.unload(i)}))}return!1}},getSchema:(e,t)=>(0,i.getNodeForeignKeySchema)(e,t,a.Browser),canCreate:function(e,t,a){if(a&&!a.check)return!0;let r=o.tree,n=t,i=e,c=[],s=!1,d=!1,p=r.getTreeNodeHierarchy(n).server.version;for(;n;){if(s||"table"!=i._type&&"partition"!=i._type||(s=!0,"is_partitioned"in i&&i.is_partitioned&&p<11e4&&(d=!0)),l.default.indexOf(["schema"],i._type)>-1)return!d;if(l.default.indexOf(["foreign_table","coll-foreign_table"],i._type)>-1)return!1;c.push(i._type),n=r.hasParent(n)?r.parent(n):null,i=n?r.itemData(n):null}return!(l.default.indexOf(c,"catalog")>-1)&&!d}})),o.Nodes.foreign_key}.apply(t,o))||(e.exports=r)},89690:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=n(a(77440)),c=n(a(2543));o=[a(98351),a(50553),a(35244),a(51268),a(68938)],void 0===(r=function(e,t,a,o){return o.Nodes.primary_key||(a.Browser.Nodes.primary_key=o.Node.extend({type:"primary_key",label:e("Primary key"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"primary_key_dialog.html"}),hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Index size")],parent_type:["table","partition"],canDrop:!0,canDropCascade:!0,url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_primary_key_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Primary key"),data:{action:"create",check:!0},enable:"canCreate"}]))},canCreate:function(e,t,a){if(a&&!a.check)return!0;let r=o.tree,n=t,i=e,l=[],s=!1,d=!1,p=r.getTreeNodeHierarchy(n).server.version;for(;n;){if(s||"table"!=i._type&&"partition"!=i._type||(s=!0,"is_partitioned"in i&&i.is_partitioned&&p<11e4&&(d=!0)),c.default.indexOf(["schema"],i._type)>-1){if(d)return!1;let e=r.children(arguments[1],!1),t=!1;return c.default.each(e,(function(e){a=o.tree.itemData(e),t||"primary_key"!=a._type||(t=!0)})),!t}if(c.default.indexOf(["foreign_table","coll-foreign_table"],i._type)>-1)return!1;l.push(i._type),n=r.hasParent(n)?r.parent(n):null,i=n?r.itemData(n):null}return!(c.default.indexOf(l,"catalog")>-1)&&!d},getSchema:function(e,t){return new l.default({columns:()=>(0,i.getNodeListByName)("column",e,t),spcname:()=>(0,i.getNodeListByName)("tablespace",e,t,{},(e=>"pg_global"!=e.label)),index:()=>(0,i.getNodeListByName)("index",e,t,{jumpAfterNode:"schema"})},e)}})),o.Nodes.primary_key}.apply(t,o))||(e.exports=r)},2231:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=n(a(53219)),c=n(a(2543));o=[a(98351),a(50553),a(35244),a(51268),a(68938)],void 0===(r=function(e,t,a,o){return o.Nodes.unique_constraint||(a.Browser.Nodes.unique_constraint=o.Node.extend({type:"unique_constraint",label:e("Unique constraint"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"unique_constraint_dialog.html"}),hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Index size")],parent_type:["table","partition"],canDrop:!0,canDropCascade:!0,url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_unique_constraint_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Unique constraint"),data:{action:"create",check:!0},enable:"canCreate"}]))},canCreate:function(e,t,a){if(a&&!a.check)return!0;let r=o.tree,n=t,i=e,l=[],s=!1,d=!1,p=o.tree.getTreeNodeHierarchy(n).server.version;for(;n;){if(s||"table"!=i._type&&"partition"!=i._type||(s=!0,"is_partitioned"in i&&i.is_partitioned&&p<11e4&&(d=!0)),c.default.indexOf(["schema"],i._type)>-1)return!d;if(c.default.indexOf(["foreign_table","coll-foreign_table"],i._type)>-1)return!1;l.push(i._type),n=r.hasParent(n)?r.parent(n):null,i=n?r.itemData(n):null}return!(c.default.indexOf(l,"catalog")>-1)&&!d},getSchema:function(e,t){return new l.default({columns:()=>(0,i.getNodeListByName)("column",e,t),spcname:()=>(0,i.getNodeListByName)("tablespace",e,t,{},(e=>"pg_global"!=e.label)),index:()=>(0,i.getNodeListByName)("index",e,t,{jumpAfterNode:"schema"})},e)}})),o.Nodes.unique_constraint}.apply(t,o))||(e.exports=r)},84811:(e,t,a)=>{var o,r;o=[a(98351),a(35244),a(51268),a(68938),a(2231),a(98432),a(95288),a(84160),a(89690)],void 0===(r=function(e,t,a){return a.Nodes["coll-constraints"]||(t.Browser.Nodes["coll-constraints"]=t.Browser.Collection.extend({node:"constraints",label:e("Constraints"),type:"coll-constraints",columns:["name","comment"],canDrop:!0,canDropCascade:!0})),a.Nodes.constraints||(t.Browser.Nodes.constraints=a.Node.extend({type:"constraints",label:e("Constraints"),collection_type:["coll-constraints","coll-foreign_table"],parent_type:["table","foreign_table"],url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,a.add_menus([]))}})),a.Nodes.constraints}.apply(t,o))||(e.exports=r)},62039:(e,t,a)=>{var o,r,n=a(24994),i=n(a(14115)),l=a(42371),c=n(a(2543));o=[a(98351),a(50553),a(35244),a(51268),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r){return o.Nodes["coll-index"]||(a.Browser.Nodes["coll-index"]=a.Browser.Collection.extend({node:"index",label:e("Indexes"),type:"coll-index",columns:["name","description"],hasStatistics:!0,statsPrettifyFields:[e("Size"),e("Index size")],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),o.Nodes.index||(a.Browser.Nodes.index=o.Node.extend({parent_type:["table","view","mview","partition"],collection_type:["coll-table","coll-view"],sqlAlterHelp:"sql-alterindex.html",sqlCreateHelp:"sql-createindex.html",dialogHelp:t("help.static",{filename:"index_dialog.html"}),type:"index",label:e("Index"),hasSQL:!0,hasDepends:!0,hasStatistics:!0,width:o.stdW.lg+"px",statsPrettifyFields:[e("Size"),e("Index size")],url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_index_on_coll",node:"coll-index",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Index..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_index",node:"index",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Index..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_index_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Index..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_index_onPartition",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Index..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_index_onMatView",node:"mview",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Index..."),data:{action:"create",check:!0},enable:"canCreate"}]))},canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema,canCreate:function(e,t,a){if(a&&!a.check)return!0;let r=o.tree,n=t,i=e,l=[],s=!1,d=!1,p=r.getTreeNodeHierarchy(n).server.version;for(;n;){if(!s&&c.default.indexOf(["table","partition"],i._type)>-1&&(s=!0,"is_partitioned"in i&&i.is_partitioned&&p<11e4&&(d=!0)),c.default.indexOf(["schema"],i._type)>-1)return!d;l.push(i._type),n=r.hasParent(n)?r.parent(n):null,i=n?r.itemData(n):null}return!(c.default.indexOf(l,"catalog")>-1)&&!d},getSchema:(e,t)=>{let o=a.Browser.Nodes.index;return new i.default({tablespaceList:()=>(0,l.getNodeListByName)("tablespace",e,t,{},(e=>"pg_global"!=e.label)),amnameList:()=>(0,l.getNodeAjaxOptions)("get_access_methods",o,e,t,{jumpAfterNode:"schema"}),columnList:()=>(0,l.getNodeListByName)("column",e,t,{}),collationList:()=>(0,l.getNodeAjaxOptions)("get_collations",o,e,t,{jumpAfterNode:"schema"}),opClassList:()=>(0,l.getNodeAjaxOptions)("get_op_class",o,e,t,{jumpAfterNode:"schema"})},{node_info:e},{amname:"btree",deduplicate_items:e.server.version>=13e4||void 0})}})),o.Nodes.index}.apply(t,o))||(e.exports=r)},5602:(e,t,a)=>{var o,r,n=a(24994),i=a(68888),l=n(a(2543)),c=n(a(6520));o=[a(98351),a(50553),a(35244),a(51268),a(59220),a(96241),a(68938)],void 0===(r=function(e,t,a,o,r,n){return o.Nodes["coll-partition"]||(a.Browser.Nodes["coll-partition"]=a.Browser.Collection.extend({node:"partition",label:e("Partitions"),type:"coll-partition",columns:["name","schema","partition_scheme","partition_value","is_partitioned","description"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),o.Nodes.partition||(a.Browser.Nodes.partition=o.Node.extend({parent_type:"table",collection_type:"coll-partition",type:"partition",label:e("Partition"),hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Total Size"),e("Indexes size"),e("Table size"),e("TOAST table size"),e("Tuple length"),e("Dead tuple length"),e("Free space")],sqlAlterHelp:"sql-altertable.html",sqlCreateHelp:"sql-createtable.html",dialogHelp:t("help.static",{filename:"table_dialog.html"}),hasScriptTypes:["create"],width:"650px",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"truncate_table",node:"partition",module:this,applies:["object","context"],callback:"truncate_table",category:e("Truncate"),priority:3,label:e("Truncate"),enable:"canCreate"},{name:"truncate_table_cascade",node:"partition",module:this,applies:["object","context"],callback:"truncate_table_cascade",category:e("Truncate"),priority:3,label:e("Truncate Cascade"),enable:"canCreate"},{name:"enable_all_triggers",node:"partition",module:this,applies:["object","context"],callback:"enable_triggers_on_table",category:e("Trigger(s)"),priority:4,label:e("Enable All"),enable:"canCreate_with_trigger_enable",data:{data_disabled:e("The selected tree node does not support this option.")}},{name:"disable_all_triggers",node:"partition",module:this,applies:["object","context"],callback:"disable_triggers_on_table",category:e("Trigger(s)"),priority:4,label:e("Disable All"),enable:"canCreate_with_trigger_disable",data:{data_disabled:e("The selected tree node does not support this option.")}},{name:"reset_table_stats",node:"partition",module:this,applies:["object","context"],callback:"reset_table_stats",priority:4,label:e("Reset Statistics"),enable:"canCreate"},{name:"detach_partition",node:"partition",module:this,applies:["object","context"],callback:"detach_partition",category:e("Detach Partition"),priority:2,label:e("Detach")},{name:"detach_partition_concurrently",node:"partition",module:this,applies:["object","context"],callback:"detach_partition_concurrently",category:e("Detach Partition"),priority:2,label:e("Concurrently"),enable:function(e,t){let a=o.tree.getTreeNodeHierarchy(t),r=a.server,n=a.partition;return r&&r.version>=14e4&&!n.is_detach_pending}},{name:"detach_partition_finalize",node:"partition",module:this,applies:["object","context"],callback:"detach_partition_finalize",category:e("Detach Partition"),priority:2,label:e("Finalize"),enable:function(e,t){let a=o.tree.getTreeNodeHierarchy(t),r=a.server,n=a.partition;return r&&r.version>=14e4&&n.is_detach_pending}},{name:"count_table_rows",node:"partition",module:o.Nodes.table,applies:["object","context"],callback:"count_table_rows",priority:2,label:e("Count Rows"),enable:!0}]))},generate_url:function(e,t,a,r,i){return-1==l.default.indexOf(["stats","statistics","dependency","dependent","reset","get_relations","get_oftype","get_attach_tables"],t)?o.Node.generate_url.apply(this,arguments):("statistics"==t&&(t="stats"),i=l.default.isUndefined(e)||l.default.isNull(e)?i||{}:o.tree.getTreeNodeHierarchy(e),n.sprintf("table/%s/%s/%s/%s/%s/%s",encodeURIComponent(t),encodeURIComponent(i.server_group._id),encodeURIComponent(i.server._id),encodeURIComponent(i.database._id),encodeURIComponent(i.partition.schema_id),encodeURIComponent(i.partition._id)))},on_done:function(e,t,o,r){1==e.success&&(a.Browser.notifier.success(e.info),o.removeIcon(r),t.icon="icon-partition",o.addIcon(r,{icon:t.icon}),o.updateAndReselectNode(r,t))},canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema,callbacks:{enable_triggers_on_table:function(e){this.callbacks.set_triggers.apply(this,[e,{is_enable_trigger:"O"}])},disable_triggers_on_table:function(e){this.callbacks.set_triggers.apply(this,[e,{is_enable_trigger:"D"}])},set_triggers:function(e,t){let r=e||{},n=o.tree,i=r.item||n.selected(),l=i?n.itemData(i):void 0;if(!l)return!1;(0,c.default)().put(this.generate_url(i,"set_trigger",l,!0),t).then((e=>{let{data:t}=e;1==t.success&&(a.Browser.notifier.success(t.info),n.updateAndReselectNode(i,l))})).catch((e=>{a.Browser.notifier.pgRespErrorNotify(e),n.refresh(i)}))},truncate_table:function(e){this.callbacks.truncate.apply(this,[e,{cascade:!1}])},truncate_table_cascade:function(e){this.callbacks.truncate.apply(this,[e,{cascade:!0}])},truncate:function(t,r){let n=t||{},i=this,l=o.tree,s=n.item||l.selected(),d=s?l.itemData(s):void 0;if(!d)return!1;a.Browser.notifier.confirm(e("Truncate Table"),e("Are you sure you want to truncate table <b>%s</b>?",d.label),(function(){let e=d;(0,c.default)().put(i.generate_url(s,"truncate",d,!0),r).then((t=>{let{data:a}=t;i.on_done(a,e,l,s)})).catch((e=>{a.Browser.notifier.pgRespErrorNotify(e),l.unload(s)}))}))},reset_table_stats:function(t){let r=t||{},n=this,i=o.tree,l=r.item||i.selected(),s=l?i.itemData(l):void 0;if(!s)return!1;a.Browser.notifier.confirm(e("Reset statistics"),e('Are you sure you want to reset the statistics for table "%s"?',s._label),(function(){let e=s;(0,c.default)().delete(n.generate_url(l,"reset",s,!0)).then((t=>{let{data:a}=t;n.on_done(a,e,i,l)})).catch((e=>{a.Browser.notifier.pgRespErrorNotify(e),i.unload(l)}))}),(function(){}))},detach:function(t,r){let n=t||{},i=this,l=o.tree,s=n.item||l.selected(),d=s?l.itemData(s):void 0;if(!d)return!1;let p=e("Detach Partition");"concurrently"===r.mode?p=e("Detach Partition Concurrently"):"finalize"===r.mode&&(p=e("Detach Partition Finalize")),a.Browser.notifier.confirm(p,e("Are you sure you want to detach the partition %s?",d._label),(function(){(0,c.default)().put(i.generate_url(s,"detach",d,!0),r).then((e=>{let{data:t}=e;if(1==t.success){a.Browser.notifier.success(t.info);let e=l.next(s);e||(e=l.prev(s),e||(e=l.parent(s))),l.remove(s),e&&l.select(e)}})).catch((e=>{a.Browser.notifier.pgRespErrorNotify(e)}))}),(function(){}))},detach_partition:function(e){this.callbacks.detach.apply(this,[e,{mode:"detach"}])},detach_partition_concurrently:function(e){this.callbacks.detach.apply(this,[e,{mode:"concurrently"}])},detach_partition_finalize:function(e){this.callbacks.detach.apply(this,[e,{mode:"finalize"}])}},getSchema:function(e,t){return(0,i.getNodePartitionTableSchema)(e,t,o)},canCreate:r.isTreeItemOfChildOfSchema,canCreate_with_trigger_enable:function(e,t,a){if(this.canCreate(e,t,a))return e.tigger_count>0},canCreate_with_trigger_disable:function(e,t,a){if(this.canCreate(e,t,a))return e.tigger_count>0&&e.has_enable_triggers>0}})),o.Nodes.partition}.apply(t,o))||(e.exports=r)},94547:(e,t,a)=>{var o,r,n=a(24994)(a(98215)),i=a(42371);o=[a(98351),a(50553),a(35244),a(51268),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r){return o.Nodes["coll-row_security_policy"]||(a.Browser.Nodes["coll-row_security_policy"]=a.Browser.Collection.extend({node:"row_security_policy",label:e("RLS Policies"),type:"coll-row_security_policy",columns:["name","description"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),o.Nodes.row_security_policy||(a.Browser.Nodes.row_security_policy=o.Node.extend({parent_type:["table","view","partition"],collection_type:["coll-table","coll-view"],type:"row_security_policy",label:e("RLS Policy"),hasSQL:!0,hasDepends:!0,width:o.stdW.sm+"px",sqlAlterHelp:"sql-alterpolicy.html",sqlCreateHelp:"sql-createpolicy.html",dialogHelp:t("help.static",{filename:"rls_policy_dialog.html"}),url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_row_security_policy_on_coll",node:"coll-row_security_policy",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("RLS Policy..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_row_security_policy",node:"row_security_policy",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("RLS Policy..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_row_security_policy_on_coll",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:6,label:e("RLS Policy..."),data:{action:"create",check:!0},enable:"canCreate"}]))},canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema,getSchema:function(e,t){return new n.default({role:()=>(0,i.getNodeListByName)("role",e,t,{},(()=>!0),(e=>(e.unshift({label:"PUBLIC",value:"public"}),e))),nodeInfo:e})},canCreate:function(e,t){let a=o.tree.getTreeNodeHierarchy(t),r=a.server;return null==a.catalog&&(r&&r.version>=90500)}})),o.Nodes.row_security_policy}.apply(t,o))||(e.exports=r)},46464:(e,t,a)=>{var o,r,n=a(24994),i=n(a(63070)),l=n(a(2543)),c=n(a(6520));o=[a(98351),a(50553),a(35244),a(51268),a(59220)],void 0===(r=function(e,t,a,o,r){return o.Nodes["coll-rule"]||(a.Browser.Nodes["coll-rule"]=a.Browser.Collection.extend({node:"rule",label:e("Rules"),type:"coll-rule",columns:["name","owner","comment"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),o.Nodes.rule||(a.Browser.Nodes.rule=o.Node.extend({parent_type:["table","view","partition"],type:"rule",sqlAlterHelp:"sql-alterrule.html",sqlCreateHelp:"sql-createrule.html",dialogHelp:t("help.static",{filename:"rule_dialog.html"}),label:e("rule"),collection_type:"coll-table",hasSQL:!0,hasDepends:!0,canDrop:function(e,t){return r.isTreeItemOfChildOfSchema.apply(this,[e,t]),!l.default.has(e,"label")||"_RETURN"!==e.label},canDropCascade:function(e,t){return r.isTreeItemOfChildOfSchema.apply(this,[e,t]),!l.default.has(e,"label")||"_RETURN"!==e.label},url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_rule_on_coll",node:"coll-rule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Rule..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_rule_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Rule..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_rule",node:"rule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Rule..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_rule",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Rule..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_rule",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Rule..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"enable_rule",node:"rule",module:this,applies:["object","context"],callback:"enable_rule",category:"connect",priority:3,label:e("Enable"),enable:"canCreate_with_rule_enable"},{name:"disable_rule",node:"rule",module:this,applies:["object","context"],callback:"disable_rule",category:"drop",priority:3,label:e("Disable"),enable:"canCreate_with_rule_disable"}]))},callbacks:{enable_rule:function(e){let t=e||{},r=o.tree,n=t.item||r.selected(),i=n?r.itemData(n):void 0;if(!i)return!1;let l=i;(0,c.default)().put(this.generate_url(n,"obj",i,!0),{is_enable_rule:"O"}).then((()=>{a.Browser.notifier.success("Rule updated."),r.removeIcon(n),l.icon="icon-rule",r.addIcon(n,{icon:l.icon}),r.updateAndReselectNode(n,l)})).catch((e=>{a.Browser.notifier.pgRespErrorNotify(e),r.refresh(n)}))},disable_rule:function(e){let t=e||{},r=o.tree,n=t.item||r.selected(),i=n?r.itemData(n):void 0;if(!i)return!1;let l=i;(0,c.default)().put(this.generate_url(n,"obj",i,!0),{is_enable_rule:"D"}).then((()=>{a.Browser.notifier.success("Rule updated"),r.removeIcon(n),l.icon="icon-rule-bad",r.addIcon(n,{icon:l.icon}),r.updateAndReselectNode(n,l)})).catch((e=>{a.Browser.notifier.pgRespErrorNotify(e),r.refresh(n)}))}},getSchema:function(e,t){return new i.default({nodeInfo:e,nodeData:t})},canCreate:function(e,t,a){if(a&&!1===a.check)return!0;let r=o.tree,n=t,i=e;for(;n;){if(l.default.indexOf(["schema"],i._type)>-1)return!0;if("coll-rule"==i._type){let e=r.hasParent(n)?r.parent(n):null,t=r.hasParent(e)?r.parent(e):null,a=r.hasParent(t)?r.parent(t):null,o=a?r.itemData(a):null;return l.default.isNull(o)||"catalog"!=o._type}if("view"==i._type||"table"==i._type){let e=r.hasParent(n)?r.parent(n):null,t=r.hasParent(e)?r.parent(e):null,a=t?r.itemData(t):null;return!l.default.isNull(a)&&"schema"==a._type}n=r.hasParent(n)?r.parent(n):null,i=n?r.itemData(n):null}return!0},canCreate_with_rule_enable:function(e,t,a){return!("view"in o.tree.getTreeNodeHierarchy(t))&&("icon-rule-bad"===e.icon&&this.canCreate(e,t,a))},canCreate_with_rule_disable:function(e,t,a){return!("view"in o.tree.getTreeNodeHierarchy(t))&&("icon-rule"===e.icon&&this.canCreate.apply(e,t,a))}})),o.Nodes["coll-rule"]}.apply(t,o))||(e.exports=r)},62068:(e,t,a)=>{var o,r,n=a(24994),i=n(a(43693)),l=a(41594),c=n(a(2543)),s=n(a(6520));function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}o=[a(58116),a(98351),a(50553),a(35244),a(51268),a(4372),a(59220),a(68938),a(24848),a(84811)],void 0===(r=function(e,t,a,o,r,n,i){return r.Nodes["coll-table"]||(r.Nodes["coll-table"]=r.Collection.extend({node:"table",label:t("Tables"),type:"coll-table",columns:["name","relowner","is_partitioned","description"],hasStatistics:!0,statsPrettifyFields:[t("Total Size"),t("Indexes size"),t("Table size"),t("TOAST table size"),t("Tuple length"),t("Dead tuple length"),t("Free space")],canDrop:i.isTreeItemOfChildOfSchema,canDropCascade:i.isTreeItemOfChildOfSchema})),r.Nodes.table||(r.Nodes.table=n.SchemaChildNode.extend({type:"table",label:t("Table"),collection_type:"coll-table",hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[t("Total Size"),t("Indexes size"),t("Table size"),t("TOAST table size"),t("Tuple length"),t("Dead tuple length"),t("Free space")],sqlAlterHelp:"sql-altertable.html",sqlCreateHelp:"sql-createtable.html",dialogHelp:a("help.static",{filename:"table_dialog.html"}),hasScriptTypes:["create","select","insert","update","delete"],width:r.stdW.lg+"px",Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_table_on_coll",node:"coll-table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:t("Table..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_table",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:t("Table..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_table__on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:t("Table..."),data:{action:"create",check:!1},enable:"canCreate"},{name:"truncate_table",node:"table",module:this,applies:["object","context"],callback:"truncate_table",category:t("Truncate"),priority:3,label:t("Truncate"),enable:"canCreate"},{name:"truncate_table_cascade",node:"table",module:this,applies:["object","context"],callback:"truncate_table_cascade",category:t("Truncate"),priority:3,label:t("Truncate Cascade"),enable:"canCreate"},{name:"truncate_table_identity",node:"table",module:this,applies:["object","context"],callback:"truncate_table_identity",category:t("Truncate"),priority:3,label:t("Truncate Restart Identity"),enable:"canCreate"},{name:"enable_all_triggers",node:"table",module:this,applies:["object","context"],callback:"enable_triggers_on_table",category:t("Trigger(s)"),priority:4,label:t("Enable All"),enable:"canCreate_with_trigger_enable",data:{data_disabled:t("The selected tree node does not support this option.")}},{name:"disable_all_triggers",node:"table",module:this,applies:["object","context"],callback:"disable_triggers_on_table",category:t("Trigger(s)"),priority:4,label:t("Disable All"),enable:"canCreate_with_trigger_disable",data:{data_disabled:t("The selected tree node does not support this option.")}},{name:"reset_table_stats",node:"table",module:this,applies:["object","context"],callback:"reset_table_stats",category:"Reset",priority:4,label:t("Reset Statistics"),enable:"canCreate"},{name:"count_table_rows",node:"table",module:this,applies:["object","context"],callback:"count_table_rows",priority:2,label:t("Count Rows"),enable:!0},{name:"generate_erd",node:"table",module:this,applies:["object","context"],callback:"generate_erd",priority:5,label:t("ERD For Table"),enable:(e,t)=>!("catalog"in o.Browser.tree.getTreeNodeHierarchy(t))}]),r.Events.on("pgadmin:browser:node:table:updated",this.onTableUpdated.bind(this)),r.Events.on("pgadmin:browser:node:type:cache_cleared",this.handle_cache.bind(this)),r.Events.on("pgadmin:browser:node:domain:cache_cleared",this.handle_cache.bind(this)))},callbacks:{enable_triggers_on_table:function(t){e.enableTriggers(r.tree,this.generate_url.bind(this),t)},disable_triggers_on_table:function(t){e.disableTriggers(r.tree,this.generate_url.bind(this),t)},truncate_table:function(e){this.callbacks.truncate.apply(this,[e,{cascade:!1}])},truncate_table_cascade:function(e){this.callbacks.truncate.apply(this,[e,{cascade:!0}])},truncate_table_identity:function(e){this.callbacks.truncate.apply(this,[e,{identity:!0}])},truncate:function(e,a){let n=e||{},i=this,l=r.tree,c=n.item||l.selected(),d=c?l.itemData(c):void 0;if(!d)return!1;o.Browser.notifier.confirm(t("Truncate Table"),t("Are you sure you want to truncate table <b>%s</b>?",d.label),(function(){let e=d;(0,s.default)().put(i.generate_url(c,"truncate",d,!0),a).then((t=>{let{data:a}=t;1==a.success&&(o.Browser.notifier.success(a.info),l.removeIcon(c),e.icon=e.is_partitioned?"icon-partition":"icon-table",l.addIcon(c,{icon:e.icon}),l.updateAndReselectNode(c,e)),2==a.success&&o.Browser.notifier.error(a.info)})).catch((e=>{o.Browser.notifier.pgRespErrorNotify(e),l.refresh(c)}))}),(function(){}))},reset_table_stats:function(e){let a=e||{},n=this,i=r.tree,l=a.item||i.selected(),c=l?i.itemData(l):void 0;if(!c)return!1;o.Browser.notifier.confirm(t("Reset statistics"),t('Are you sure you want to reset the statistics for table "%s"?',c._label),(function(){let e=c;(0,s.default)().delete(n.generate_url(l,"reset",c,!0)).then((t=>{let{data:a}=t;1==a.success&&(o.Browser.notifier.success(a.info),i.removeIcon(l),e.icon=e.is_partitioned?"icon-partition":"icon-table",i.addIcon(l,{icon:e.icon}),i.updateAndReselectNode(l,c))})).catch((e=>{o.Browser.notifier.pgRespErrorNotify(e),i.refresh(l)}))}),(function(){}))},count_table_rows:function(e){let t=e||{},a=r.tree,n=t.item||a.selected(),i=n?a.itemData(n):void 0;if(!i)return!1;let l=p(p({},i),{},{_type:this.type});(0,s.default)().get(this.generate_url(n,"count_rows",l,!0)).then((e=>{let{data:t}=e;o.Browser.notifier.success(t.info,null),i.rows_cnt=t.data.total_rows,a.updateAndReselectNode(n,i)})).catch((e=>{o.Browser.notifier.pgRespErrorNotify(e),a.refresh(n)}))},generate_erd:function(e){let t=e||{},a=r.tree,n=t.item||a.selected(),i=n?a.itemData(n):void 0;o.Tools.ERD.showErdTool(i,n,!0)}},getSchema:function(e,t){return(0,l.getNodeTableSchema)(e,t,r)},canCreate_with_trigger_enable:function(e){return e.tigger_count>0&&(0==e.has_enable_triggers||e.has_enable_triggers<e.tigger_count)},canCreate_with_trigger_disable:function(e){return e.tigger_count>0&&e.has_enable_triggers>0},onTableUpdated:function(e,t,a){let n,i;if(a.is_partitioned&&"affected_partitions"in a){let t,l=a.affected_partitions,s=[],d=[],p=function(){if(!d.length)return;let e=d.pop();r.addChildTreeNodes(e.treeHierarchy,e.parent,e.type,e.childrenIDs,p)};if("detached"in l&&l.detached.length>0){r.removeChildTreeNodesById(e,"coll-partition",c.default.map(l.detached,(function(e){return parseInt(e.oid)}))),t=r.findParentTreeNodeByType(e,"schema");let a=c.default.groupBy(l.detached,(function(e){return parseInt(e.schema_id)}));for(n in a)if(t=r.findSiblingTreeNode(t,n),t){i=c.default.map(a[n],(function(e){return parseInt(e.oid)}));let e=r.findChildCollectionTreeNode(t,"coll-table");e&&d.push({parent:e,type:"table",treeHierarchy:o.Browser.tree.getTreeNodeHierarchy(t),childrenIDs:c.default.clone(i)})}}if("attached"in l&&l.attached.length>0){t=r.findParentTreeNodeByType(e,"schema");let a=c.default.groupBy(l.attached,(function(e){return parseInt(e.schema_id)}));for(n in a)t=r.findSiblingTreeNode(t,n),t&&(i=c.default.map(a[n],(function(e){return parseInt(e.oid)})),r.removeChildTreeNodesById(t,"coll-table",i)),s=s.concat(i)}if("created"in l&&l.created.length>0&&c.default.each(l.created,(function(e){s.push(e.oid)})),s.length){let t=r.findChildCollectionTreeNode(e,"coll-partition");t&&d.push({parent:t,type:"partition",treeHierarchy:o.Browser.tree.getTreeNodeHierarchy(e),childrenIDs:s})}p()}let l=r.tree.selected();r.tree.refresh(l)},handle_cache:function(){this.clear_cache(null)}})),r.Nodes.table}.apply(t,o))||(e.exports=r)},26734:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=n(a(92284)),c=n(a(2543)),s=n(a(6520));o=[a(98351),a(50553),a(35244),a(51268),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r){return o.Nodes["coll-trigger"]||(a.Browser.Nodes["coll-trigger"]=a.Browser.Collection.extend({node:"trigger",label:e("Triggers"),type:"coll-trigger",columns:["name","description"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),o.Nodes.trigger||(a.Browser.Nodes.trigger=o.Node.extend({parent_type:["table","view","partition","foreign_table"],collection_type:["coll-table","coll-view","coll-foreign_table"],type:"trigger",label:e("Trigger"),hasSQL:!0,hasDepends:!0,width:o.stdW.sm+"px",sqlAlterHelp:"sql-altertrigger.html",sqlCreateHelp:"sql-createtrigger.html",dialogHelp:t("help.static",{filename:"trigger_dialog.html"}),url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_trigger_on_coll",node:"coll-trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger",node:"trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger_onPartition",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"enable_trigger",node:"trigger",module:this,applies:["object","context"],callback:"enable_trigger",category:"connect",priority:3,label:e("Enable"),enable:"canCreate_with_trigger_enable"},{name:"disable_trigger",node:"trigger",module:this,applies:["object","context"],callback:"disable_trigger",category:"drop",priority:3,label:e("Disable"),enable:"canCreate_with_trigger_disable"},{name:"create_trigger_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger_onForeignTable",node:"foreign_table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:3,label:e("Trigger..."),data:{action:"create",check:!0},enable:"canCreate"}]))},callbacks:{enable_trigger:function(e){let t=e||{},r=o.tree,n=t.item||r.selected(),i=n?r.itemData(n):void 0;if(!i)return!1;let l=i;(0,s.default)().put(this.generate_url(n,"enable",i,!0),{is_enable_trigger:"O"}).then((e=>{let{data:t}=e;1==t.success&&(a.Browser.notifier.success(t.info),r.removeIcon(n),l.icon="icon-trigger",l.has_enable_triggers=t.data.has_enable_triggers,r.addIcon(n,{icon:l.icon}),r.updateAndReselectNode(n,l))})).catch((e=>{a.Browser.notifier.pgRespErrorNotify(e),r.refresh(n)}))},disable_trigger:function(e){let t=e||{},r=o.tree,n=t.item||r.selected(),i=n?r.itemData(n):void 0;if(!i)return!1;let l=i;(0,s.default)().put(this.generate_url(n,"enable",i,!0),{is_enable_trigger:"D"}).then((e=>{let{data:t}=e;1==t.success&&(a.Browser.notifier.success(t.info),r.removeIcon(n),l.icon="icon-trigger-bad",l.has_enable_triggers=t.data.has_enable_triggers,r.addIcon(n,{icon:l.icon}),r.updateAndReselectNode(n,l))})).catch((e=>{a.Browser.notifier.pgRespErrorNotify(e),r.refresh(n)}))}},canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema,getSchema:function(e,t){return new l.default({triggerFunction:()=>(0,i.getNodeAjaxOptions)("get_triggerfunctions",this,e,t,{cacheLevel:"trigger_function",jumpAfterNode:"schema"},(e=>c.default.reject(e,(function(e){return""==e.label})))),columns:()=>(0,i.getNodeListByName)("column",e,t,{cacheLevel:"column"}),nodeInfo:e})},canCreate:r.isTreeItemOfChildOfSchema,canCreate_with_trigger_enable:function(e,t,a){return!("view"in o.tree.getTreeNodeHierarchy(t))&&("icon-trigger-bad"===e.icon&&this.canCreate(e,t,a))},canCreate_with_trigger_disable:function(e,t,a){return!("view"in o.tree.getTreeNodeHierarchy(t))&&("icon-trigger"===e.icon&&this.canCreate(e,t,a))}})),o.Nodes.trigger}.apply(t,o))||(e.exports=r)},52658:(e,t,a)=>{var o,r,n=a(42371),i=a(21164),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&{}.hasOwnProperty.call(e,n)){var i=r?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,a&&a.set(e,o),o}(a(54408));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}o=[a(98351),a(50553),a(35244),a(51268),a(4372),a(59220),a(68938)],void 0===(r=function(e,t,a,o,r,c){return o.Nodes["coll-type"]||(o.Nodes["coll-type"]=o.Collection.extend({node:"type",label:e("Types"),type:"coll-type",columns:["name","typeowner","description"],canDrop:c.isTreeItemOfChildOfSchema,canDropCascade:c.isTreeItemOfChildOfSchema})),o.Nodes.type||(o.Nodes.type=r.SchemaChildNode.extend({type:"type",sqlAlterHelp:"sql-altertype.html",sqlCreateHelp:"sql-createtype.html",dialogHelp:t("help.static",{filename:"type_dialog.html"}),label:e("Type"),collection_type:"coll-type",hasSQL:!0,hasDepends:!0,width:o.stdW.md+"px",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_type_on_coll",node:"coll-type",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Type..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_type",node:"type",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Type..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_type",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Type..."),data:{action:"create",check:!1},enable:"canCreate"}]))},ext_funcs:void 0,getSchema:(e,t)=>{let r=a.Browser.Nodes.type;return new l.default((a=>(0,i.getNodePrivilegeRoleSchema)(r,e,t,a)),(()=>(0,l.getCompositeSchema)(r,e,t)),(()=>(0,l.getRangeSchema)(r,e,t)),(()=>(0,l.getExternalSchema)(r,e,t)),(()=>(0,l.getDataTypeSchema)(r,e,t)),{roles:()=>(0,n.getNodeListByName)("role",e,t,{cacheLevel:"database"}),schemas:()=>(0,n.getNodeListByName)("schema",e,t,{cacheLevel:"database"}),server_info:o.serverInfo[e.server._id],node_info:e},{typeowner:o.serverInfo[e.server._id].user.name,schema:"catalog"in e?e.catalog.label:e.schema.label,typtype:"c"})}})),o.Nodes.type}.apply(t,o))||(e.exports=r)},48121:(e,t,a)=>{var o,r,n=a(24994),i=n(a(49293)),l=a(42371),c=a(21164),s=a(1097),d=n(a(2543)),p=n(a(6520));o=[a(98351),a(50553),a(35244),a(51268),a(4372),a(59220),a(96241)],void 0===(r=function(e,t,a,o,r,n,u){return o.Nodes["coll-mview"]||(o.Nodes["coll-mview"]=o.Collection.extend({node:"mview",label:e("Materialized Views"),type:"coll-mview",columns:["name","owner","comment"],hasStatistics:!0,statsPrettifyFields:[e("Total Size")],canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema})),o.Nodes.mview||(o.Nodes.mview=r.SchemaChildNode.extend({type:"mview",sqlAlterHelp:"sql-altermaterializedview.html",sqlCreateHelp:"sql-creatematerializedview.html",dialogHelp:t("help.static",{filename:"materialized_view_dialog.html"}),label:e("Materialized View"),hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Total Size"),e("Indexes size"),e("Table size"),e("TOAST table size"),e("Tuple length"),e("Dead tuple length"),e("Free space")],hasScriptTypes:["create","select"],collection_type:"coll-mview",width:o.stdW.md+"px",Init:function(){this.initialized||(this.initialized=!0,a.Browser.add_menu_category({name:"refresh_mview",label:e("Refresh View"),priority:18}),o.add_menus([{name:"create_mview_on_coll",node:"coll-mview",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,data:{action:"create",check:!0},enable:"canCreate",label:e("Materialized View...")},{name:"create_mview",node:"mview",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,data:{action:"create",check:!0},enable:"canCreate",label:e("Materialized View...")},{name:"create_mview",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:18,data:{action:"create",check:!1},enable:"canCreate",label:e("Materialized View...")},{name:"refresh_mview_data",node:"mview",module:this,priority:1,callback:"refresh_mview",category:"refresh_mview",applies:["object","context"],label:e("With data"),data:{concurrent:!1,with_data:!0}},{name:"refresh_mview_nodata",node:"mview",callback:"refresh_mview",priority:2,module:this,category:"refresh_mview",applies:["object","context"],label:e("With no data"),data:{concurrent:!1,with_data:!1}},{name:"refresh_mview_concurrent",node:"mview",module:this,category:"refresh_mview",enable:"is_version_supported",data:{concurrent:!0,with_data:!0},priority:3,applies:["object","context"],callback:"refresh_mview",label:e("With data (concurrently)")}]))},getSchema:function(e,t){return new i.default((a=>(0,c.getNodePrivilegeRoleSchema)("",e,t,a)),(()=>(0,s.getNodeVacuumSettingsSchema)(this,e,t)),{role:()=>(0,l.getNodeListByName)("role",e,t),schema:()=>(0,l.getNodeListByName)("schema",e,t,{cacheLevel:"database"}),spcname:()=>(0,l.getNodeListByName)("tablespace",e,t,{},(e=>"pg_global"!=e.label)),table_amname_list:()=>(0,l.getNodeAjaxOptions)("get_access_methods",this,e,t),nodeInfo:e},{owner:o.serverInfo[e.server._id].user.name,schema:"schema"in e?e.schema.label:""})},refresh_mview:function(t){let r=t||{},n=this,i=o.tree,l=r.item||i.selected(),c=l?i.itemData(l):void 0,s=null;if(!c)return!1;let d=l;for(;d;){let t=o.tree.itemData(d);if("server"==t._type){s=t;break}if(!o.tree.hasParent(d)){a.Browser.notifier.alert(e("Please select server or child node from tree."));break}d=o.tree.parent(d)}if(!s)return;if(!u.hasBinariesConfiguration(o,s))return;const _=(0,p.default)();_.get(n.generate_url(l,"check_utility_exists",c,!0)).then((r=>{let{data:i}=r;i.success?_.put(n.generate_url(l,"refresh_data",c,!0),{concurrent:t.concurrent,with_data:t.with_data}).then((t=>{let{data:r}=t;r.data?.status?o.BgProcessManager.startProcess(r.data.job_id,r.data.desc):a.Browser.notifier.alert(e("Failed to create materialized view refresh job."),r.errormsg)})).catch((t=>{a.Browser.notifier.pgRespErrorNotify(t,e("Failed to create materialized view refresh job."))})):a.Browser.notifier.alert(e("Utility not found"),i.errormsg)})).catch((()=>{a.Browser.notifier.alert(e("Utility not found"),e("Failed to fetch Utility information"))}))},is_version_supported:function(e,t){let o=a.Browser.tree,r=t||o.selected(),n=o?.getTreeNodeHierarchy(r);return(d.default.isUndefined(n)?0:n.server.version)>=90400}})),o.Nodes.mview}.apply(t,o))||(e.exports=r)},110:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=a(21164),c=n(a(33852));o=[a(98351),a(50553),a(51268),a(4372),a(59220),a(46464)],void 0===(r=function(e,t,a,o,r){return a.Nodes["coll-view"]||(a.Nodes["coll-view"]=a.Collection.extend({node:"view",label:e("Views"),type:"coll-view",columns:["name","owner","comment"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),a.Nodes.view||(a.Nodes.view=o.SchemaChildNode.extend({type:"view",sqlAlterHelp:"sql-alterview.html",sqlCreateHelp:"sql-createview.html",dialogHelp:t("help.static",{filename:"view_dialog.html"}),label:e("View"),hasSQL:!0,hasDepends:!0,hasScriptTypes:["create","select","insert"],collection_type:"coll-view",Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_view_on_coll",node:"coll-view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("View..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_view",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("View..."),data:{action:"create",check:!0},enable:"canCreate"},{name:"create_view",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:17,label:e("View..."),data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){return new c.default((a=>(0,l.getNodePrivilegeRoleSchema)("",e,t,a)),e,{role:()=>(0,i.getNodeListByName)("role",e,t),schema:()=>(0,i.getNodeListByName)("schema",e,t,{cacheLevel:"database"})},{owner:a.serverInfo[e.server._id].user.name,schema:e.schema?e.schema.label:""})}})),a.Nodes.view}.apply(t,o))||(e.exports=r)},22072:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=a(21164),c=a(30660),s=n(a(21222)),d=a(59022),p=n(a(2543)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&{}.hasOwnProperty.call(e,n)){var i=r?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,a&&a.set(e,o),o}(a(6520));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(_=function(e){return e?a:t})(e)}o=[a(98351),a(50553),a(35244),a(91849),a(9089),a(68938)],void 0===(r=function(e,t,a,o,r){function n(e,t){let a=o.tree.getTreeNodeHierarchy(t).server;return(!!p.default.isUndefined(e?.canDisconn)||e.canDisconn)&&a&&a.version>=13e4}if(o.Nodes["coll-database"]||(o.Nodes["coll-database"]=o.Collection.extend({node:"database",label:e("Databases"),type:"coll-database",columns:["name","datowner","comments"],hasStatistics:!0,canDrop:!0,selectParentNodeOnDelete:!0,canDropCascade:!1,canDropForce:n,statsPrettifyFields:[e("Size"),e("Size of temporary files")]})),!o.Nodes.database){o.Nodes.database=o.Node.extend({parent_type:"server",type:"database",sqlAlterHelp:"sql-alterdatabase.html",sqlCreateHelp:"sql-createdatabase.html",dialogHelp:t("help.static",{filename:"database_dialog.html"}),hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Size"),e("Size of temporary files")],canDrop:function(e){return e.canDrop},selectParentNodeOnDelete:!0,label:e("Database"),node_image:function(){return"pg-icon-database"},width:"700px",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_database_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Database..."),data:{action:"create"},enable:"can_create_database"},{name:"create_database_on_coll",node:"coll-database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Database..."),data:{action:"create"},enable:"can_create_database"},{name:"create_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Database..."),data:{action:"create"},enable:"can_create_database"},{name:"connect_database",node:"database",module:this,applies:["object","context"],callback:"connect_database",category:"connect",priority:4,label:e("Connect Database"),enable:"is_not_connected",data:{data_disabled:e("Selected database is already connected.")}},{name:"delete_database_force",node:"database",module:this,applies:["object","context"],callback:"delete_database_force",category:"delete",priority:2,label:e("Delete (Force)"),enable:n},{name:"disconnect_database",node:"database",module:this,applies:["object","context"],callback:"disconnect_database",category:"disconnect",priority:5,label:e("Disconnect from database"),enable:"is_connected",data:{data_disabled:e("Selected database is already disconnected.")}},{name:"disconnect_all_databases",node:"coll-database",module:this,applies:["object","context"],callback:"disconnect_all_databases",category:"disconnect",priority:5,label:e("Disconnect from all databases"),enable:"can_disconnect",data:{data_disabled:e("All the databases are already disconnected.")}},{name:"generate_erd",node:"database",module:this,applies:["object","context"],callback:"generate_erd",priority:5,label:e("ERD For Database"),enable:e=>e.allowConn}]),p.default.bindAll(this,"connection_lost"),o.Events.on("pgadmin:database:connection:lost",this.connection_lost))},can_create_database:function(e,t){let a=o.tree.getTreeNodeHierarchy(t).server;return a.connected&&a.user.can_create_db},canCreate:function(e,t){let a=o.tree.getTreeNodeHierarchy(t).server;return a&&a.version>=1e5},is_not_connected:function(e){return e&&!e.connected&&e.allowConn},is_connected:function(e){return e?.connected&&e?.canDisconn},is_psql_enabled:function(e){return e?.connected&&a.enable_psql},is_conn_allow:function(e){return e?.allowConn},connection_lost:function(t,r,n){if(o.tree){let r=o.tree,i=t&&r.itemData(t),l=this;for(;"database"!=i?._type;)t=r.parent(t),i=t&&r.itemData(t);if(t&&i){if(!i.allowConn)return!1;if(p.default.isUndefined(i.is_connecting)||!i.is_connecting){i.is_connecting=!0;let c=function(e,t){t._id==this._id&&(i.is_connecting=!1,o.Events.off("pgadmin:database:connect:cancelled",c),t=(e=e&&r.parent(e))&&r.itemData(e),e&&t&&o.Events.trigger("pgadmin:server:disconnect",{item:e,data:t},!1))};if(o.Events.on("pgadmin:database:connect:cancelled",c),n)return void h(l,i,r,t,!0);a.Browser.notifier.confirm(e("Connection lost"),e("Would you like to reconnect to the database?"),(function(){h(l,i,r,t,!0)}),(function(){i.is_connecting=!1;let e=i.isTemplate?"icon-database-template-not-connected":"icon-database-not-connected";r.addIcon(t,{icon:e}),r.updateAndReselectNode(t,i),o.Events.trigger("pgadmin:database:connect:cancelled",t,i,l)}))}}}},can_disconnect:function(e,t){return p.default.some(t.children,(e=>{let t=a.Browser.tree.getData(e),{connected:o,canDisconn:r}=t;return o&&r}))},callbacks:{connect_database:function(e){let t=e||{},a=this,r=o.tree,n=t.item||r.selected(),i=n?r.itemData(n):void 0;return"template0"!=i?.label&&b(a,i,r,n,!0),!1},disconnect_database:function(e){let t=e||{},a=this,r=o.tree,n=t.item||r.selected(),i=n?r.itemData(n):void 0;return i&&m(a,i,r,n,!0),!1},disconnect_all_databases:function(t,r){let n=r.children??[],i=this,l=o.tree;return n&&a.Browser.notifier.confirm(e("Disconnect from all databases"),e("Are you sure you want to disconnect from all databases?"),(function(){p.default.forEach(n,(function(e){let t=a.Browser.tree.getData(e);t.connected&&t.canDisconn&&m(i,t,l,e,!1)})),l.deselect(r)}),(function(){return!0}),e("Disconnect"),e("Cancel"),"disconnect"),!1},generate_erd:function(e){let t=e||{},r=o.tree,n=t.item||r.selected(),i=n?r.itemData(n):void 0;a.Tools.ERD.showErdTool(i,n,!0)},beforeopen:function(e,t){return!(!t||"database"!=t._type||"template0"==t.label)&&(o.tree.addIcon(e,{icon:t.icon}),!(!t.connected&&t.allowConn&&!t.is_connecting)||(t.is_connecting=!0,b(this,t,o.tree,e,!0),!1))},selected:function(e,t){return!(!t||"database"!=t._type)&&(o.tree.addIcon(e,{icon:t.icon}),t.connected||!t.allowConn||t.is_connecting||(t.is_connecting=!0,b(this,t,o.tree,e,!1)),t.connected?o.Node.callbacks.selected.apply(this,arguments):void 0)},refresh:function(e,t){let a=o.tree,r=t||a.selected();a.itemData(r).allowConn&&o.Node.callbacks.refresh.apply(this,arguments)},delete_database_force:function(e,t){o.Node.callbacks.delete_obj.apply(this,[{url:"delete"},t])}},getSchema:function(e,t){let a=()=>(0,i.getNodeAjaxOptions)("get_ctypes",this,e,t,{cacheLevel:"server"});return new s.default((()=>(0,c.getNodeVariableSchema)(this,e,t,!1,!0)),(a=>(0,l.getNodePrivilegeRoleSchema)(this,e,t,a)),{role:()=>(0,i.getNodeListByName)("role",e,t),encoding:()=>(0,i.getNodeAjaxOptions)("get_encodings",this,e,t,{cacheLevel:"server"}),template:()=>(0,i.getNodeAjaxOptions)("get_databases",this,e,t,{cacheLevel:"server"},(e=>{let t=[];return e&&p.default.isArray(e)&&p.default.each(e,(function(e){t.push({label:e,value:e,image:"pg-icon-database"})})),t})),spcname:()=>(0,i.getNodeListByName)("tablespace",e,t,{},(e=>"pg_global"!=e.label)),datcollate:a,datctype:a,daticulocale:()=>(0,i.getNodeAjaxOptions)("get_icu_locale",this,e,t,{cacheLevel:"server"}),datbuiltinlocale:()=>(0,i.getNodeAjaxOptions)("get_builtin_locale",this,e,t,{cacheLevel:"server"})},e,{datowner:o.serverInfo[e.server._id].user.name})}}),o.SecurityGroupSchema={id:"security",label:e("Security"),type:"group",visible:function(e){if(e&&"node_info"in e){return!("catalog"in(e.node_info||e.handler.node_info))}return!0}};let _=(0,u.default)(),b=function(e,t,a,o,r){h(e,t,a,o,r)},h=function(t,n,i,l,c){let s=c||n.connected,h=function(t,o,l,s,p,u){if(n.is_connecting=!1,200!=t.response?.status&&-1!==t.response?.request?.responseText?.search("Ticket expired")){i.addIcon(p,{icon:"icon-server-connecting"}),r.fetch_ticket().then((function(){b(o,l,s,p,c)}),(function(o){i.setInode(p);let r=n.isTemplate?"icon-database-template-not-connected":"icon-database-not-connected";i.addIcon(p,{icon:r}),a.Browser.notifier.pgNotifier(o,t,e("Connect to database."))}))}else{if(!u){i.setInode(p);let e=n.isTemplate?"icon-database-template-not-connected":"icon-database-not-connected";i.addIcon(p,{icon:e})}a.Browser.notifier.pgNotifier("error",t,"Error",(function(t){setTimeout((function(){"CRYPTKEY_SET"==t?b(o,l,s,p,c):"ALERT_CALLED"!=t&&(0,d.showServerPassword)(e("Connect to database"),t,o,l,s,p,u,m,h,g)}),100)}))}},m=function(t,r,n,i,l,c){if(n.is_connecting=!1,t?.data){if("boolean"==typeof t.data.connected&&(n.connected=t.data.connected),"string"==typeof t.data.icon){i.removeIcon(l),n.icon=t.data.icon;let e=n.isTemplate?"icon-database-template-connected":n.icon;i.addIcon(l,{icon:e})}t.data.already_connected&&(t.info=e("Database already connected.")),t.data.info_prefix&&(t.info=`${p.default.escape(t.data.info_prefix)} - ${t.info}`),t.data.already_connected?a.Browser.notifier.info(t.info):a.Browser.notifier.success(t.info),o.Events.trigger("pgadmin:database:connected",l,n),o.enable_disable_menus(l),o.Nodes.database.callbacks.selected(l,n),c||setTimeout((function(){i.select(l),i.open(l)}),10)}},g=function(e,a,r){r.is_connecting=!1;let i=e.parent(a);e.removeIcon(a);let l=n.isTemplate?"icon-database-template-not-connected":"icon-database-not-connected";e.addIcon(a,{icon:l}),e.updateAndReselectNode(a,r),t.trigger("connect:cancelled",t,a,r),o.Events.trigger("pgadmin:database:connect:cancelled",a,r,t),e.select(i)};_.post(t.generate_url(l,"connect",n,!0)).then((e=>{let{data:a}=e;if(1==a.success)return m(a,t,n,i,l,s)})).catch((a=>(410===a.response?.status&&(a=e("Error: Object not found - %s.",(0,u.parseApiError)(a))),h(a,t,n,i,l,s))))},m=function(t,r,n,i){let l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=r,s=n,d=i,_=r.label,b=function(){c.label=`<span class='text-muted'>[Disconnecting...]</span> ${_}`,s.setLabel(d,{label:c.label}),s.close(d);let e=c;(0,u.default)().delete(t.generate_url(d,"connect",c,!0)).then((t=>{let{data:r}=t;if(1==r.success){let t=s.parent(d);r.data.info_prefix&&(r.info=`${p.default.escape(r.data.info_prefix)} - ${r.info}`),a.Browser.notifier.success(r.info),s.removeIcon(d),e.connected=!1,e.icon=e.isTemplate?"icon-database-template-not-connected":"icon-database-not-connected",c.label=_,s.setLabel(d,{label:_}),s.addIcon(d,{icon:e.icon}),s.unload(d),o.Events.trigger("pgadmin:browser:tree:update-tree-state",d),setTimeout((function(){s.select(t)}),10)}else{try{a.Browser.notifier.error(r.errormsg)}catch(e){console.warn(e.stack||e)}s.unload(d)}})).catch((function(e){a.Browser.notifier.pgRespErrorNotify(e),s.unload(d)}))};l?a.Browser.notifier.confirm(e("Disconnect from database"),e("Are you sure you want to disconnect from the database - <b>%s</b>?",c.label),(function(){b()}),(function(){return!0}),e("Disconnect"),e("Cancel"),"disconnect"):b()}}return o.Nodes["coll-database"]}.apply(t,o))||(e.exports=r)},39655:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=n(a(48019)),c=n(a(6520)),s=n(a(2543)),d=n(a(35244));o=[a(98351),a(50553),a(51268),a(68938)],void 0===(r=function(e,t,a){return a.Nodes["coll-subscription"]||(a.Nodes["coll-subscription"]=a.Collection.extend({node:"subscription",label:e("Subscriptions"),type:"coll-subscription",columns:["name","subowner","proppub","enabled"],hasStatistics:!0})),a.Nodes.subscription||(a.Nodes.subscription=a.Node.extend({parent_type:"database",type:"subscription",sqlAlterHelp:"sql-altersubscription.html",sqlCreateHelp:"sql-createsubscription.html",dialogHelp:t("help.static",{filename:"subscription_dialog.html"}),label:e("Subscription"),hasSQL:!0,canDrop:!0,canDropCascade:!0,hasDepends:!0,hasStatistics:!0,width:"501px",Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_subscription_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Subscription..."),data:{action:"create"},enable:a.Nodes.database.canCreate},{name:"create_subscription_on_coll",node:"coll-subscription",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Subscription..."),data:{action:"create"},enable:"canCreate"},{name:"create_subscription",node:"subscription",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Subscription..."),data:{action:"create"},enable:"canCreate"}]))},getSchema:function(t,o){return new l.default({role:()=>(0,i.getNodeListByName)("role",t,o),getPublication:(r,n,i,l,p,u,_,b,h,m,g,f,y)=>new Promise(((w,v)=>{const N=(0,c.default)();if(null!=r&&null!=i&&null!=l&&null!=p){let c=a.Nodes.cast.generate_url.apply(a.Nodes.subscription,[null,"get_publications",o,!1,t]);N.get(c,{params:{host:r,password:n,port:i,username:l,db:p,connectTimeout:u,passfile:_,sslmode:b,sslcompression:h,sslcert:m,sslkey:g,sslrootcert:f,sslcrl:y}}).then((t=>{""!==t.data.errormsg||s.default.isNull(t.data.data)?!s.default.isNull(t.data.errormsg)&&s.default.isNull(t.data.data)&&(v(new Error(t.data.errormsg)),d.default.Browser.notifier.alert(e("Check connection?"),e(t.data.errormsg))):(w(t.data.data),d.default.Browser.notifier.info(e("Publication fetched successfully.")))})).catch((t=>{v(t instanceof Error?t:Error(e("Something went wrong")))}))}}))},{node_info:t.server},{subowner:a.serverInfo[t.server._id].user.name})}})),a.Nodes["coll-subscription"]}.apply(t,o))||(e.exports=r)},71783:(e,t,a)=>{var o,r,n=a(24994)(a(69451));o=[a(98351),a(50553),a(51268),a(68938)],void 0===(r=function(e,t,a){return a.Nodes["coll-pgd_replication_servers"]||(a.Nodes["coll-pgd_replication_servers"]=a.Collection.extend({node:"pgd_replication_servers",label:e("Servers"),type:"coll-pgd_replication_servers",columns:["node_seq_id","node_id","node_name","node_kind_name","node_group_name"],canEdit:!1,canDrop:!1,canDropCascade:!1,canSelect:!1})),a.Nodes.pgd_replication_servers||(a.Nodes.pgd_replication_servers=a.Node.extend({parent_type:"pgd_replication_groups",type:"pgd_replication_servers",epasHelp:!1,sqlAlterHelp:"",sqlCreateHelp:"",dialogHelp:t("help.static",{filename:"pgd_replication_server_dialog.html"}),label:e("Server"),hasSQL:!1,hasScriptTypes:!1,canDrop:!1,node_image:function(e){return e.icon?e.icon:"icon-server-not-connected"},Init:function(){this.initialized||(this.initialized=!0)},getSchema:()=>new n.default})),a.Nodes["coll-pgd_replication_servers"]}.apply(t,o))||(e.exports=r)},69169:(e,t,a)=>{var o,r,n=a(24994)(a(509));o=[a(98351),a(50553),a(51268),a(68938)],void 0===(r=function(e,t,a){return a.Nodes["coll-pgd_replication_groups"]||(a.Nodes["coll-pgd_replication_groups"]=a.Collection.extend({node:"pgd_replication_groups",label:e("PGD Replication Groups"),type:"coll-pgd_replication_groups",columns:["node_group_id","node_group_name","node_group_location"],canEdit:!1,canDrop:!1,canDropCascade:!1,canSelect:!1})),a.Nodes.pgd_replication_groups||(a.Nodes.pgd_replication_groups=a.Node.extend({parent_type:"server",type:"pgd_replication_groups",epasHelp:!1,sqlAlterHelp:"",sqlCreateHelp:"",dialogHelp:t("help.static",{filename:"pgd_replication_group_dialog.html"}),label:e("PGD Replication Group"),hasSQL:!1,hasScriptTypes:!1,canDrop:!1,node_image:function(e){return e.icon?e.icon:"icon-server-not-connected"},Init:function(){this.initialized||(this.initialized=!0)},getSchema:()=>new n.default})),a.Nodes["coll-pgd_replication_groups"]}.apply(t,o))||(e.exports=r)},29196:(e,t,a)=>{var o,r,n=a(24994)(a(70370));o=[a(98351),a(50553),a(51268),a(68938)],void 0===(r=function(e,t,a){return a.Nodes["coll-replica_node"]||(a.Nodes["coll-replica_node"]=a.Collection.extend({node:"replica_node",label:e("Replica Nodes"),type:"coll-replica_node",columns:["pid","name","usename","state"],canEdit:!1,canDrop:!1,canDropCascade:!1})),a.Nodes.replica_node||(a.Nodes.replica_node=a.Node.extend({parent_type:"server",type:"replica_node",epasHelp:!1,sqlAlterHelp:"",sqlCreateHelp:"",dialogHelp:t("help.static",{filename:"replica_node_dialog.html"}),label:e("Replica Nodes"),hasSQL:!1,hasScriptTypes:!1,canDrop:!1,Init:function(){this.initialized||(this.initialized=!0)},getSchema:()=>new n.default})),a.Nodes["coll-replica_node"]}.apply(t,o))||(e.exports=r)},14324:(e,t,a)=>{var o,r,n=a(24994)(a(63994));o=[a(98351),a(50553),a(51268),a(68938)],void 0===(r=function(e,t,a){return a.Nodes["coll-resource_group"]||(a.Nodes["coll-resource_group"]=a.Collection.extend({node:"resource_group",label:e("Resource Groups"),type:"coll-resource_group",columns:["name","cpu_rate_limit","dirty_rate_limit"],canDrop:!0,canDropCascade:!1})),a.Nodes.resource_group||(a.Nodes.resource_group=a.Node.extend({parent_type:"server",type:"resource_group",epasHelp:!0,dialogHelp:t("help.static",{filename:"resource_group_dialog.html"}),label:e("Resource Group"),hasSQL:!0,canDrop:!0,Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_resourcegroup_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Resource Group..."),data:{action:"create",data_disabled:e("This option is only available on EPAS servers.")},enable:function(e,t){return a.tree.getTreeNodeHierarchy(t).server.connected&&"ppas"===e.server_type&&e.version>=90400}},{name:"create_resource_group_on_coll",node:"coll-resource_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Resource Group..."),data:{action:"create",data_disabled:e("This option is only available on EPAS servers.")}},{name:"create_resource_group",node:"resource_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Resource Group..."),data:{action:"create",data_disabled:e("This option is only available on EPAS servers.")}}]))},getSchema:()=>new n.default})),a.Nodes["coll-resource_group"]}.apply(t,o))||(e.exports=r)},68832:(e,t,a)=>{var o,r,n=a(24994)(a(60094)),i=a(30660),l=a(42371),c=a(93808),s=a(19776);o=[a(98351),a(50553),a(35244),a(51268)],void 0===(r=function(e,t,a,o){return o.Nodes["coll-role"]||(a.Browser.Nodes["coll-role"]=a.Browser.Collection.extend({node:"role",label:e("Login/Group Roles"),type:"coll-role",columns:["rolname","rolvaliduntil","rolconnlimit","rolcanlogin","rolsuper","rolcreaterole","rolcreatedb","rolinherit","rolreplication"],canDrop:!0,canDropCascade:!1})),o.Nodes.role||(a.Browser.Nodes.role=a.Browser.Node.extend({parent_type:"server",type:"role",sqlAlterHelp:"sql-alterrole.html",sqlCreateHelp:"sql-createrole.html",dialogHelp:t("help.static",{filename:"role_dialog.html"}),label:e("Login/Group Role"),hasSQL:!0,width:"550px",canDrop:function(e,t){let a=o.tree.getTreeNodeHierarchy(t).server;return e.is_superuser?a.connected&&a.user.is_superuser:a.connected&&a.user.can_create_role},hasDepends:!0,node_label:function(e){return e.label},node_image:function(e){return e?e.can_login?"icon-role":"icon-group":"icon-role"},title:function(t){return t?t.can_login?e("Login Role")+" - "+t.label:e("Group Role")+" - "+t.label:this.label},Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_role_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Login/Group Role..."),data:{action:"create"},enable:"can_create_role"},{name:"create_role_on_roles",node:"coll-role",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Login/Group Role..."),data:{action:"create"},enable:"can_create_role"},{name:"create_role",node:"role",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Login/Group Role..."),data:{action:"create"},enable:"can_create_role"},{name:"reassign_role",node:"role",module:this,applies:["object","context"],callback:"reassign_role",category:"role",priority:5,label:e("Reassign/Drop Owned..."),enable:"can_reassign_role"}]))},can_create_role:function(e,t){let a=o.tree.getTreeNodeHierarchy(t).server;return a.connected&&a.user.can_create_role},can_reassign_role:function(e,t){return o.tree.getTreeNodeHierarchy(t).server.connected&&e.can_login},reassign_role:function(){(0,s.showRoleReassign)()},getSchema:function(e,t){return new n.default((()=>(0,i.getNodeVariableSchema)(this,e,t,!0,!1)),(()=>(0,c.getMembershipSchema)(this,e,t)),{role:()=>(0,l.getNodeListByName)("role",e,t),nodeInfo:e})}})),o.Nodes.role}.apply(t,o))||(e.exports=r)},6709:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=n(a(60945)),c=a(59022),s=n(a(2543)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&{}.hasOwnProperty.call(e,n)){var i=r?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(o,n,i):o[n]=e[n]}return o.default=e,a&&a.set(e,o),o}(a(6520));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}o=[a(98351),a(50553),a(35244),a(51268),a(28080),a(9089)],void 0===(r=function(e,t,a,o,r,n){if(!o.Nodes.server){a.Browser.Nodes.server=a.Browser.Node.extend({parent_type:"server_group",type:"server",dialogHelp:t("help.static",{filename:"server_dialog.html"}),label:e("Server"),width:o.stdW.md+"px",canDrop:function(e){let t=e.user_id;return!(t!=r.id&&!s.default.isUndefined(t))},dropAsRemove:!0,dropPriority:5,hasStatistics:!0,hasCollectiveStatistics:!0,can_expand:function(e){return e?.connected},title:function(t,a){return"create"==a?e("Register - %s",this.label):"copy"==a?e("Copy Server - %s",t.label):t._label??""},copy:function(t){return t.name=e("Copy of %s",t.name),t?.shared&&t.user_id!=r?.id&&(t.gid=null,t.user_id=r?.id,t.shared=!1,t.server_owner=null,t.shared_username=null),t},Init:function(){this.initialized||(this.initialized=!0,o.add_menu_category({name:"server",label:e("Server"),priority:1}),o.add_menus([{name:"create_server_on_sg",node:"server_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"register",priority:1,label:e("Server..."),data:{action:"create"},enable:"canCreate"},{name:"disconnect_all_servers",node:"server_group",module:this,applies:["object","context"],callback:"disconnect_all_servers",priority:5,label:e("Disconnect from all servers"),data:{action:"disconnect_all"},enable:"can_disconnect_all"},{name:"create_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"register",priority:3,label:e("Server..."),data:{action:"create"},enable:"canCreate"},{name:"connect_server",node:"server",module:this,applies:["object","context"],callback:"connect_server",category:"connect",priority:4,label:e("Connect Server"),enable:"is_not_connected",data:{data_disabled:e("Database server is already connected.")}},{name:"disconnect_server",node:"server",module:this,applies:["object","context"],callback:"disconnect_server",category:"drop",priority:5,label:e("Disconnect from server"),enable:"is_connected",data:{data_disabled:e("Database server is already disconnected.")}},{name:"reload_configuration",node:"server",module:this,applies:["tools","context"],callback:"reload_configuration",category:"reload",priority:10,label:e("Reload Configuration"),enable:"enable_reload_config",data:{data_disabled:e("Please select a server from the object explorer to reload the configuration files.")}},{name:"restore_point",node:"server",module:this,applies:["tools","context"],callback:"restore_point",category:"restore",priority:7,label:e("Add Named Restore Point..."),enable:"is_applicable",data:{data_disabled:e("Please select any server from the object explorer to Add Named Restore Point.")}},{name:"change_password",node:"server",module:this,applies:["object"],callback:"change_password",label:e("Change Password..."),priority:10,enable:"is_connected",data:{data_disabled:e("Please connect server to enable change password.")}},{name:"wal_replay_pause",node:"server",module:this,applies:["tools","context"],callback:"pause_wal_replay",category:"wal_replay_pause",priority:8,label:e("Pause Replay of WAL"),enable:"wal_pause_enabled",data:{data_disabled:e("Please select a connected database as a Super user and run in Recovery mode to Pause Replay of WAL.")}},{name:"wal_replay_resume",node:"server",module:this,applies:["tools","context"],callback:"resume_wal_replay",category:"wal_replay_resume",priority:9,label:e("Resume Replay of WAL"),enable:"wal_resume_enabled",data:{data_disabled:e("Please select a connected database as a Super user and run in Recovery mode to Resume Replay of WAL.")}},{name:"clear_saved_password",node:"server",module:this,applies:["object","context"],callback:"clear_saved_password",label:e("Clear Saved Password"),priority:11,enable:function(e){return"server"===e?._type&&e?.is_password_saved}},{name:"clear_sshtunnel_password",node:"server",module:this,applies:["object","context"],callback:"clear_sshtunnel_password",label:e("Clear SSH Tunnel Password"),priority:12,enable:function(e){return"server"===e?._type&&e?.is_tunnel_password_saved},data:{data_disabled:e("SSH Tunnel password is not saved for selected server.")}},{name:"copy_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",label:e("Copy Server..."),data:{action:"copy"},priority:4}]),s.default.bindAll(this,"connection_lost"),o.Events.on("pgadmin:server:connection:lost",this.connection_lost))},is_not_connected:function(e){return e&&!e.connected},canCreate:function(e){let t=e.user_id;return t==r.id||s.default.isUndefined(t)},is_connected:function(e){return e?.connected},enable_reload_config:function(e){return"server"==e?._type&&e?.connected&&e?.user?.is_superuser},is_applicable:function(e){return"server"==e?._type&&e?.connected&&e?.user?.is_superuser&&!(e.in_recovery??1)},wal_pause_enabled:function(e){return"server"==e?._type&&e?.connected&&e?.user?.is_superuser&&e?.in_recovery&&!(e?.wal_pause??1)},wal_resume_enabled:function(e){return"server"==e?._type&&e?.connected&&e?.user?.is_superuser&&e?.in_recovery&&e?.wal_pause},can_disconnect_all:function(e,t){return s.default.some(t.children,(e=>a.Browser.tree.getData(e).connected))},callbacks:{connect_server:function(e){let t=e||{},a=this,r=o.tree,n=t.item||r.selected(),i=n?r.itemData(n):void 0;return i&&u(a,i,r,n,!1),!1},disconnect_server:function(e){let t=e||{},a=this,r=o.tree,n="item"in t?t.item:r.selected(),i=n?r.itemData(n):void 0;return i&&b(a,i,r,n,!0),!1},disconnect_all_servers:function(t,r){let n=r.children??[],i=this,l=o.tree;return n&&a.Browser.notifier.confirm(e("Disconnect from all servers"),e("Are you sure you want to disconnect from all servers?"),(function(){s.default.forEach(n,(function(e){let t=a.Browser.tree.getData(e);t.connected&&b(i,t,l,e,!1)})),l.deselect(r),setTimeout((()=>{l.select(r)}),100)}),(function(){return!0}),e("Disconnect"),e("Cancel"),"disconnect"),!1},beforeopen:function(e,t){return!(!t||"server"!=t._type)&&(o.tree.addIcon(e,{icon:t.icon}),!!t.connected||(u(this,t,o.tree,e,!1),!1))},added:function(e,t){return o.serverInfo=o.serverInfo||{},o.serverInfo[t._id]=s.default.extend({},t),a.Browser.Node.callbacks.added.apply(this,arguments),p(t.version),t.was_connected&&_(this,t,o.tree,e),!0},reload_configuration:function(t){let r=t||{},n=this,i=o.tree,l=r.item||i.selected(),c=l?i.itemData(l):void 0;return c&&a.Browser.notifier.confirm(e("Reload server configuration"),e("Are you sure you want to reload the server configuration on %s?",c.label),(function(){(0,d.default)().get(n.generate_url(l,"reload",c,!0)).then((e=>{let{data:t}=e;t.data.status?a.Browser.notifier.success(t.data.result):a.Browser.notifier.error(t.data.result)})).catch((function(e){a.Browser.notifier.pgRespErrorNotify(e),i.unload(l)}))}),(function(){return!0})),!1},restore_point:function(t){let a=t||{},r=o.tree,n=a.item||r.selected(),i=n?r.itemData(n):void 0;if(!i)return!1;(0,c.showNamedRestorePoint)(e("Restore point name"),i,this,n)},change_password:function(t){let r=t||{},n=this,i=o.tree,l=r.item||i.selected(),s=l?i.itemData(l):void 0,p=!1,u=n.generate_url(l,"check_pgpass",s,!0);return s&&(0,d.default)().get(u).then((t=>{let{data:a}=t;a.success&&a.data.is_pgpass&&(p=!0),(0,c.showChangeServerPassword)(e("Change Password"),s,n,l,p)})).catch((function(e){a.Browser.notifier.pgRespErrorNotify(e)})),!1},on_done:function(e,t,o){1==e.success&&(a.Browser.notifier.success(e.info),t.itemData(o).wal_pause=e.data.wal_pause,t.deselect(o),setTimeout((function(){t.select(o)}),10))},pause_wal_replay:function(e){let t=e||{},r=this,n=o.tree,i=t.item||n.selected(),l=i?n.itemData(i):void 0;if(!l)return!1;(0,d.default)().delete(r.generate_url(i,"wal_replay",l,!0)).then((e=>{let{data:t}=e;r.callbacks.on_done(t,n,i)})).catch((function(e){a.Browser.notifier.pgRespErrorNotify(e),n.unload(i)}))},resume_wal_replay:function(e){let t=e||{},r=this,n=o.tree,i=t.item||n.selected(),l=i?n.itemData(i):void 0;if(!l)return!1;(0,d.default)().put(r.generate_url(i,"wal_replay",l,!0)).then((e=>{let{data:t}=e;r.callbacks.on_done(t,n,i)})).catch((function(e){a.Browser.notifier.pgRespErrorNotify(e),n.unload(i)}))},clear_saved_password:function(t){let r=t||{},n=this,i=o.tree,l=r.item||i.selected(),c=l?i.itemData(l):void 0;return c&&a.Browser.notifier.confirm(e("Clear saved password"),e("Are you sure you want to clear the saved password for server %s?",c.label),(function(){(0,d.default)().put(n.generate_url(l,"clear_saved_password",c,!0)).then((e=>{let{data:t}=e;1==t.success?(a.Browser.notifier.success(t.info),i.itemData(l).is_password_saved=t.data.is_password_saved,i.deselect(l),setTimeout((function(){i.select(l)}))):a.Browser.notifier.error(t.info)})).catch((function(e){a.Browser.notifier.pgRespErrorNotify(e)}))}),(function(){return!0})),!1},clear_sshtunnel_password:function(t){let r=t||{},n=this,i=o.tree,l=r.item||i.selected(),c=l?i.itemData(l):void 0;return c&&a.Browser.notifier.confirm(e("Clear SSH Tunnel password"),e("Are you sure you want to clear the saved password of SSH Tunnel for server %s?",c.label),(function(){(0,d.default)().put(n.generate_url(l,"clear_sshtunnel_password",c,!0)).then((e=>{let{data:t}=e;1==t.success?(a.Browser.notifier.success(t.info),i.itemData(l).is_tunnel_password_saved=t.data.is_tunnel_password_saved):a.Browser.notifier.error(t.info)})).catch((function(e){a.Browser.notifier.pgRespErrorNotify(e)}))}),(function(){return!0})),!1},server_psql_tool:function(e){let t=e||{},a=o.tree,r=t.item||a.selected(),n=r?a.itemData(r):void 0;o.psql.psql_tool(n,r,!0)}},getSchema:(e,t)=>new l.default((0,i.getNodeListById)(o.Nodes.server_group,e,t,{},(e=>!e.is_shared)),t.user_id,{gid:e.server_group._id}),connection_lost:function(t,r){if(o.tree){let n=o.tree,i=t&&n.itemData(t),l=this;for(;"server"!=i?._type;)t=n.parent(t),i=t&&n.itemData(t);if(t&&"server"==i?._type&&(s.default.isUndefined(i.is_connecting)||!i.is_connecting)){i.is_connecting=!0;let c=function(e){i._id==e&&(i.is_connecting=!1,o.Events.off("pgadmin:server:connect:cancelled",c),o.Events.trigger("pgadmin:database:connect:cancelled",e,r.data.database||i.db),o.Events.trigger("pgadmin:server:disconnect",{item:t,data:i},!1))};o.Events.on("pgadmin:server:connect:cancelled",c),a.Browser.notifier.confirm(e("Connection lost"),e("Would you like to reconnect to the database?"),(function(){u(l,i,n,t,!0)}),(function(){i.is_connecting=!1,n.unload(t),n.addIcon(t,{icon:"icon-database-not-connected"}),o.Events.trigger("pgadmin:server:connect:cancelled",t,i,l),n.select(t)}))}}}});let p=function(t,o){!s.default.isUndefined(t)&&!s.default.isNull(t)&&t<1e5?a.Browser.notifier.warning(e("You have connected to a server version that is older than is supported by pgAdmin. This may cause pgAdmin to break in strange and unpredictable ways. Or a plague of frogs. Either way, you have been warned!")+"<br /><br />"+e("Server connected"),null):s.default.isUndefined(o)||s.default.isNull(o)||a.Browser.notifier.success(o)},u=function(t,i,l,_,b){let h=t.generate_url(_,"obj",i,!0);(0,d.default)().get(h).then((e=>{let{data:t}=e;t.shared&&s.default.isNull(t.username)&&i.user_id!=r.id?t.service?(i.is_connecting=!1,l.unload(_),l.addIcon(_,{icon:"icon-shared-server-not-connected"})):(a.Browser.Node.callbacks.show_obj_properties.call(a.Browser.Nodes[l.itemData(_)._type],{action:"edit",item:_}),i.is_connecting=!1,l.unload(_),l.addIcon(_,{icon:"icon-shared-server-not-connected"}),a.Browser.notifier.info("Please enter the server details to connect to the server. This server is a shared server.")):-1==t.cloud_status&&a.Browser.BgProcessManager.recheckCloudServer(i._id)})).then((()=>{i.is_connecting=!1}));let m=b||i.connected,g=function(t,o,r,s,d,p,_){if(i.connected=!1,_||(l.close(p),s.shared&&"True"==a.server_mode?l.addIcon(p,{icon:"icon-shared-server-not-connected"}):l.addIcon(p,{icon:"icon-server-not-connected"})),200!=t.response?.status&&-1!==t.response?.request?.responseText?.search("Ticket expired")){l.addIcon(p,{icon:"icon-server-connecting"}),n.fetch_ticket().then((function(){u(r,s,d,p,_)}),(function(){l.addIcon(p,{icon:"icon-server-not-connected"}),a.Browser.notifier.pgNotifier("error",t,"Connection error",e("Connect to server."))}))}else a.Browser.notifier.pgNotifier("error",t,o,(function(t){setTimeout((function(){"CRYPTKEY_SET"==t?u(r,s,d,p,_):"CRYPTKEY_NOT_SET"!=t&&(0,c.showServerPassword)(e("Connect to Server"),t,r,s,d,p,_,f,g,y)}),100)}))},f=function(e,t,a,r,n,i){if(e?.data){"string"==typeof e.data.icon&&(r.removeIcon(n),a.icon=e.data.icon,r.addIcon(n,{icon:a.icon})),s.default.extend(a,e.data),a.is_connecting=!1,(o.serverInfo=o.serverInfo||{})[a._id]=s.default.extend({},a),p(a.version,e.info),o.Events.trigger("pgadmin:server:connected",a._id,n,a),o.Events.trigger("pgadmin:database:connected",n,a),o.Events.trigger("pgadmin-browser:tree:selected",n,a,t),o.enable_disable_menus(n),i?setTimeout((function(){t.callbacks.refresh.apply(t,[!0])}),10):(r.setInode(n),setTimeout((function(){r.select(n),r.open(n)}),10))}},y=function(e,r,n,l){n.is_connecting=!1,e.unload(r),e.removeIcon(r),n.shared&&"True"==a.server_mode?e.addIcon(r,{icon:"icon-shared-server-not-connected"}):e.addIcon(r,{icon:"icon-server-not-connected"}),t.trigger("connect:cancelled",i._id,i.db,t,r,n),o.Events.trigger("pgadmin:server:connect:cancelled",i._id,r,n,t),o.Events.trigger("pgadmin:database:connect:cancelled",i._id,i.db,r,n,t),l&&e.select(r)};if(i.is_connecting||-1==i.cloud_status)return;i.is_connecting=!0,l.setLeaf(_),l.removeIcon(_),l.addIcon(_,{icon:"icon-server-connecting"});let w=t.generate_url(_,"connect",i,!0);(0,d.default)().post(w).then((e=>{let{data:a}=e;if(1==a.success)return f(a,t,i,l,_,m)})).catch((e=>g(e,(0,d.parseApiError)(e),t,i,l,_,m))).then((()=>{i.is_connecting=!1}))},_=function(e,t,r,n){let i=e.generate_url(n,"connect",t,!0);r.setLeaf(n),r.removeIcon(n),r.addIcon(n,{icon:"icon-server-connecting"}),(0,d.default)().get(i).then((e=>{let{data:i}=e;if(r.setInode(n),i?.data){"string"==typeof i.data.icon&&(r.removeIcon(n),t.icon=i.data.icon,r.addIcon(n,{icon:t.icon})),s.default.extend(t,i.data),(o.serverInfo=o.serverInfo||{})[t._id]=s.default.extend({},t),t.errmsg&&a.Browser.notifier.error(t.errmsg),o.Events.trigger("pgadmin:server:connected",t._id,n,t)}})).catch((e=>{r.setInode(n),t.shared&&"True"==a.server_mode?r.addIcon(n,{icon:"icon-shared-server-not-connected"}):r.addIcon(n,{icon:"icon-server-not-connected"}),a.Browser.notifier.pgRespErrorNotify(e)}))},b=async function(t,r,n,i){let l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=r,s=i,p=n,u=r.label,_=function(){c.label=`<span class='text-muted'>[Disconnecting...]</span> ${u}`,p.setLabel(s,{label:c.label}),p.close(s),(0,d.default)().delete(t.generate_url(s,"connect",c,!0)).then((e=>{let{data:r}=e;if(1==r.success)if(l?a.Browser.notifier.success(r.info):a.Browser.notifier.success(`${u} - ${r.info}`),c=p.itemData(s),p.removeIcon(s),c.connected=!1,c.label=u,p.setLabel(s,{label:u}),p.update(s,c),o.Events.trigger("pgadmin:server:disconnect",{item:s,data:c},!1),c.shared&&"True"==a.server_mode?c.icon="icon-shared-server-not-connected":c.icon="icon-server-not-connected",p.addIcon(s,{icon:c.icon}),t.callbacks.refresh.apply(t,[null,s]),setTimeout((()=>{p.close(s)}),10),o.serverInfo&&c._id in o.serverInfo)delete o.serverInfo[c._id];else{try{a.Browser.notifier.error(r.errormsg)}catch(e){console.warn(e.stack||e)}p.setLabel(s,{label:u}),p.unload(s)}})).catch((function(e){a.Browser.notifier.pgRespErrorNotify(e),p.setLabel(s,{label:u}),p.unload(s)}))};l?a.Browser.notifier.confirm(e("Disconnect from server"),e("Are you sure you want to disconnect from the server <b>%s</b>?",u),(function(){_()}),(function(){return!0}),e("Disconnect"),e("Cancel"),"disconnect"):_()}}return o.Nodes.server}.apply(t,o))||(e.exports=r)},2756:(e,t,a)=>{var o,r,n=a(24994),i=a(42371),l=a(21164),c=a(30660),s=n(a(26346));o=[a(98351),a(50553),a(51268),a(68938)],void 0===(r=function(e,t,a){return a.Nodes["coll-tablespace"]||(a.Nodes["coll-tablespace"]=a.Collection.extend({node:"tablespace",label:e("Tablespaces"),type:"coll-tablespace",columns:["name","spcuser","description"],hasStatistics:!0,statsPrettifyFields:[e("Size")],canDrop:!0,canDropCascade:!1})),a.Nodes.tablespace||(a.Nodes.tablespace=a.Node.extend({parent_type:"server",type:"tablespace",sqlAlterHelp:"sql-altertablespace.html",sqlCreateHelp:"sql-createtablespace.html",dialogHelp:t("help.static",{filename:"tablespace_dialog.html"}),label:e("Tablespace"),hasSQL:!0,canDrop:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Size")],Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_tablespace_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Tablespace..."),data:{action:"create"},enable:"can_create_tablespace"},{name:"create_tablespace_on_coll",node:"coll-tablespace",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Tablespace..."),data:{action:"create"},enable:"can_create_tablespace"},{name:"create_tablespace",node:"tablespace",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Tablespace..."),data:{action:"create"},enable:"can_create_tablespace"}]))},can_create_tablespace:function(e,t){let o=a.tree.getTreeNodeHierarchy(t).server;return o.connected&&o.user.is_superuser},callbacks:{},getSchema:function(e,t){return new s.default((()=>(0,c.getNodeVariableSchema)(this,e,t,!1,!1)),(a=>(0,l.getNodePrivilegeRoleSchema)(this,e,t,a)),{role:()=>(0,i.getNodeListByName)("role",e,t)},{spcuser:a.serverInfo[e.server._id].user.name})}})),a.Nodes["coll-tablespace"]}.apply(t,o))||(e.exports=r)},26868:(e,t,a)=>{var o,r,n=a(24994),i=n(a(13850)),l=n(a(2543));o=[a(98351),a(50553),a(35244),a(28080),a(51268),a(84726)],void 0===(r=function(e,t,a,o){return a.Browser.Nodes.server_group||(a.Browser.Nodes.server_group=a.Browser.Node.extend({parent_type:null,type:"server_group",dialogHelp:t("help.static",{filename:"server_group_dialog.html"}),label:e("Server Group"),width:"250px",height:"150px",is_collection:!0,Init:function(){this.initialized||(this.initialized=!0,a.Browser.add_menus([{name:"create_server_group",node:"server_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Server Group..."),data:{action:"create"}}]))},getSchema:()=>new i.default,canDrop:function(e){let t=e.user_id;return!(t!=o.id&&!l.default.isUndefined(t))},dropAsRemove:!0,canDelete:function(e){let t=a.Browser.tree.siblings(e,!0);return!(!t||0==t.length)}})),a.Browser.Nodes.server_group}.apply(t,o))||(e.exports=r)}}]);